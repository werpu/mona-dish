!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(this,(function(){return function(){"use strict";var t={484:function(t,e){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),l=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)l.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.Es2019Array=void 0;var l=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var l=t.apply(this,i([],o(n),!1))||this;if(!Array.prototype.flatMap){var a=e.prototype.flatMap_;l.flatMap=a}return l}return r(e,t),e.prototype.flatMap_=function(t,n){void 0===n&&(n=!1);var r=[],l=function(e){var n=t(e);if(Array.isArray(n)){if(1==n.length)return void r.push(n[1]);n.length>1&&n.forEach((function(t){return l(t)}))}else r.push(e)};return this.forEach((function(t){return l(t)})),new(e.bind.apply(e,i([void 0],o(r),!1)))},e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new(e.bind.apply(e,i([void 0],o(t.prototype.concat.apply(this,i([],o(n),!1))),!1)))},e.prototype.reverse=function(){return new(e.bind.apply(e,i([void 0],o(t.prototype.reverse.call(this)),!1)))},e.prototype.slice=function(n,r){return new(e.bind.apply(e,i([void 0],o(t.prototype.slice.call(this,n,r)),!1)))},e.prototype.splice=function(n,r){return new(e.bind.apply(e,i([void 0],o(t.prototype.splice.call(this,n,r)),!1)))},e.prototype.filter=function(n,r){return new(e.bind.apply(e,i([void 0],o(t.prototype.filter.call(this,n,r)),!1)))},e}(Array);e.Es2019Array=l},456:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e._global$=void 0,e._global$=function(){var t,e="undefined"!=typeof globalThis&&globalThis.window?globalThis.window:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:void 0!==n.g&&(null===n.g||void 0===n.g?void 0:n.g.window)?n.g.window:void 0!==n.g?n.g:null;return null!==(t=null==e?void 0:e.window)&&void 0!==t?t:e}},805:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Lang=void 0;var r=n(152);!function(t){function e(t){for(var e=/\s/,n=(t=t.replace(/^\s\s*/,"")).length;e.test(t.charAt(--n)););return t.slice(0,n+1)}function n(t){return!!arguments.length&&null!=t&&("string"==typeof t||t instanceof String)}t.saveResolve=function(t,e){void 0===e&&(e=null);try{var n=t();return r.Optional.fromNullable(null!=n?n:e)}catch(t){return r.Optional.absent}},t.saveResolveLazy=function(t,e){void 0===e&&(e=null);try{var n=t();return r.Optional.fromNullable(null!=n?n:e())}catch(t){return r.Optional.absent}},t.strToArray=function(t,n){void 0===n&&(n=/\./gi);var r=[];return t.split(n).forEach((function(t){r.push(e(t))})),r},t.trim=e,t.objToArray=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=[]),"__undefined__"==(null!=t?t:"__undefined__")?null!=n?n:null:t instanceof Array&&!e&&!n?t:n.concat(Array.prototype.slice.call(t,e))},t.equalsIgnoreCase=function(t,e){var n=null!=e?e:"___no_value__";return(null!=t?t:"___no_value__").toLowerCase()===n.toLowerCase()},t.assertType=function(t,e){return n(e)?typeof t==e:t instanceof e},t.isString=n,t.isFunc=function(t){return t instanceof Function||"function"==typeof t},t.objAssign=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(null==t)throw new TypeError("Cannot convert undefined or null to object");var r=Object(t);return Object.assign?(e.forEach((function(t){return Object.assign(r,t)})),r):(e.filter((function(t){return null!=t})).forEach((function(t){var e=t;Object.keys(e).filter((function(t){return Object.prototype.hasOwnProperty.call(e,t)})).forEach((function(t){return r[t]=e[t]}))})),r)}}(e.Lang||(e.Lang={}))},152:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),l=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)l.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},l=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.Config=e.CONFIG_ANY=e.CONFIG_VALUE=e.ValueEmbedder=e.Optional=e.Monad=void 0;var a=n(805),s=n(484),u=a.Lang.objAssign,f=function(){function t(t){this._value=t}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),t.prototype.map=function(e){return e||(e=function(t){return t}),new t(e(this.value))},t.prototype.flatMap=function(e){for(var n=this.map(e);(null==n?void 0:n.value)instanceof t;)n=n.value;return n},t}();e.Monad=f;var c=function(t){function e(e){return t.call(this,e)||this}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value instanceof f?this._value.flatMap().value:this._value},enumerable:!1,configurable:!0}),e.fromNullable=function(t){return new e(t)},e.prototype.isAbsent=function(){return void 0===this.value||null==this.value},e.prototype.isPresent=function(t){var e=this.isAbsent();return!e&&t&&t.call(this,this),!e},e.prototype.ifPresentLazy=function(t){return void 0===t&&(t=function(){}),this.isPresent.call(this,t),this},e.prototype.orElse=function(t){return this.isPresent()?this:null==t?e.absent:this.flatMap((function(){return t}))},e.prototype.orElseLazy=function(t){return this.isPresent()?this:this.flatMap(t)},e.prototype.flatMap=function(n){var r=t.prototype.flatMap.call(this,n);return r instanceof e?r.flatMap():e.fromNullable(r.value)},e.prototype.getIf=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t=this.preprocessKeys.apply(this,l([],i(t),!1));for(var n=this,r=0;r<t.length;r++){var o=this.keyVal(t[r]),a=this.arrayIndex(t[r]);if(""===o&&a>=0){if((n=this.getClass().fromNullable(n.value instanceof Array?n.value.length<a?null:n.value[a]:null)).isAbsent())return n}else if(o&&a>=0){if(n.getIfPresent(o).isAbsent())return n;if((n=n.getIfPresent(o).value instanceof Array?this.getClass().fromNullable(n.getIfPresent(o).value[a]):this.getClass().absent).isAbsent())return n}else{if((n=n.getIfPresent(o)).isAbsent())return n;a>-1&&(n=this.getClass().fromNullable(n.value[a]))}}return n},e.prototype.match=function(t){return!this.isAbsent()&&t(this.value)},e.prototype.get=function(t){return void 0===t&&(t=e.absent),this.isAbsent()?this.getClass().fromNullable(t).flatMap():this.getClass().fromNullable(this.value).flatMap()},e.prototype.toJson=function(){return JSON.stringify(this.value)},e.prototype.getClass=function(){return e},e.prototype.arrayIndex=function(t){var e=t.indexOf("["),n=t.indexOf("]");return e>=0&&n>0&&e<n?parseInt(t.substring(e+1,n)):-1},e.prototype.keyVal=function(t){var e=t.indexOf("[");return e>=0?t.substring(0,e):t},e.prototype.getIfPresent=function(t){return this.isAbsent()?this.getClass().absent:this.getClass().fromNullable(this.value[t]).flatMap()},e.prototype.resolve=function(t){if(this.isAbsent())return e.absent;try{return e.fromNullable(t(this.value))}catch(t){return e.absent}},e.prototype.preprocessKeys=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(new(s.Es2019Array.bind.apply(s.Es2019Array,l([void 0],i(t),!1)))).flatMap((function(t){return(new(s.Es2019Array.bind.apply(s.Es2019Array,l([void 0],i(t.split(/]\s*\[/gi)),!1)))).map((function(t){return-1==(t=t.replace(/^\s+|\s+$/g,"")).indexOf("[")&&-1!=t.indexOf("]")&&(t="["+t),-1==t.indexOf("]")&&-1!=t.indexOf("[")&&(t+="]"),t}))}))},e.absent=e.fromNullable(null),e}(f);e.Optional=c;var p=function(t){function e(e,n){void 0===n&&(n="value");var r=t.call(this,e)||this;return r.key=n,r}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value?this._value[this.key]:null},set:function(t){this._value&&(this._value[this.key]=t)},enumerable:!1,configurable:!0}),e.prototype.orElse=function(t){var n={};return n[this.key]=t,this.isPresent()?this:new e(n,this.key)},e.prototype.orElseLazy=function(t){if(this.isPresent())return this;var n={};return n[this.key]=t(),new e(n,this.key)},e.prototype.getClass=function(){return e},e.fromNullable=function(t,n){return void 0===n&&(n="value"),new e(t,n)},e.absent=e.fromNullable(null),e}(c);e.ValueEmbedder=p;var h=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.arrPos=null!=r?r:-1,o}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return""==this.key&&this.arrPos>=0?this._value[this.arrPos]:this.key&&this.arrPos>=0?this._value[this.key][this.arrPos]:this._value[this.key]},set:function(t){""==this.key&&this.arrPos>=0?this._value[this.arrPos]=t:this.key&&this.arrPos>=0?this._value[this.key][this.arrPos]=t:this._value[this.key]=t},enumerable:!1,configurable:!0}),e.absent=e.fromNullable(null),e}(p);e.CONFIG_VALUE="__END_POINT__",e.CONFIG_ANY="__ANY_POINT__";var y=function(t){function n(e,n){var r=t.call(this,e)||this;return r.configDef=n,r}return o(n,t),Object.defineProperty(n.prototype,"shallowCopy",{get:function(){return this.shallowCopy$()},enumerable:!1,configurable:!0}),n.prototype.shallowCopy$=function(){var t=new n({});return t.shallowMerge(this.value),t},Object.defineProperty(n.prototype,"deepCopy",{get:function(){return this.deepCopy$()},enumerable:!1,configurable:!0}),n.prototype.deepCopy$=function(){return new n(u({},this.value))},n.fromNullable=function(t){return new n(t)},n.prototype.shallowMerge=function(t,e,n){var r=this;void 0===e&&(e=!0),void 0===n&&(n=!1);var o=function(o){if(void 0===o||null==o)return"continue";!e&&o in a.value||(n?Array.isArray(t.getIf(o).value)?(new(s.Es2019Array.bind.apply(s.Es2019Array,l([void 0],i(t.getIf(o).value),!1)))).forEach((function(t){return r.append(o).value=t})):a.append(o).value=t.getIf(o).value:a.assign(o).value=t.getIf(o).value)},a=this;for(var u in t.value)o(u)},n.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length<1;if(!n){this.assertAccessPath.apply(this,l([],i(t),!1));var r=t[t.length-1],o=this.getIf.apply(this,l([],i(t),!1)).isPresent();this.buildPath.apply(this,l([],i(t),!1));var a=this.arrayIndex(r);if(a>-1)throw Error("Append only possible on non array properties, use assign on indexed data");var s=this.getIf.apply(this,l([],i(t),!1)).value;return Array.isArray(s)||(s=this.assign.apply(this,l([],i(t),!1)).value=[s]),o&&s.push({}),a=s.length-1,new h(1==t.length?this.value:this.getIf.apply(this,t.slice(0,t.length-1)).value,r,a)}},n.prototype.appendIf=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t?this.append.apply(this,l([],i(e),!1)):{value:null}},n.prototype.assign=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!(t.length<1)){this.assertAccessPath.apply(this,l([],i(t),!1)),this.buildPath.apply(this,l([],i(t),!1));var n=this.keyVal(t[t.length-1]),r=this.arrayIndex(t[t.length-1]);return new h(1==t.length?this.value:this.getIf.apply(this,t.slice(0,t.length-1)).value,n,r)}},n.prototype.assignIf=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t?this.assign.apply(this,l([],i(e),!1)):{value:null}},n.prototype.getIf=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.assertAccessPath.apply(this,l([],i(e),!1)),this.getClass().fromNullable(t.prototype.getIf.apply(this,e).value)},n.prototype.get=function(e){return this.getClass().fromNullable(t.prototype.get.call(this,e).value)},n.prototype.delete=function(t){return t in this.value&&delete this.value[t],this},n.prototype.toJson=function(){return JSON.stringify(this.value)},n.prototype.getClass=function(){return n},n.prototype.setVal=function(t){this._value=t},n.prototype.assertAccessPath=function(){for(var t,n,r,o,a,u,f,p,h,y=this,v=[],d=0;d<arguments.length;d++)v[d]=arguments[d];if(v=this.preprocessKeys.apply(this,l([],i(v),!1)),this.configDef)for(var g="Access Path to config invalid",b=c.fromNullable(Object.keys(this.configDef).map((function(t){var e={};return e[t]=y.configDef[t],e}))),_=function(y){var d=A.keyVal(v[y]),_=A.arrayIndex(v[y]);if(!(b=A.isArray(_)?""!=d?Array.isArray(b.value)?c.fromNullable(null===(n=null===(t=(new(s.Es2019Array.bind.apply(s.Es2019Array,l([void 0],i(b.value),!1)))).find((function(t){var e;return!(null===(e=null==t?void 0:t[d])||void 0===e||!e)})))||void 0===t?void 0:t[d])||void 0===n?void 0:n[_]):c.fromNullable(null!==(a=null===(o=null===(r=b.value)||void 0===r?void 0:r[d])||void 0===o?void 0:o[_])&&void 0!==a?a:null):Array.isArray(b.value)?c.fromNullable(null===(u=b.value)||void 0===u?void 0:u[_]):c.absent:Array.isArray(b.value)?c.fromNullable(null===(f=(new(s.Es2019Array.bind.apply(s.Es2019Array,l([void 0],i(b.value),!1)))).find((function(t){var e;return!(null===(e=null==t?void 0:t[d])||void 0===e||!e)})))||void 0===f?void 0:f[d]):c.fromNullable(null!==(h=null===(p=b.value)||void 0===p?void 0:p[d])&&void 0!==h?h:null)).isPresent())throw Error(g);if(b.value==e.CONFIG_ANY)return{value:void 0}},A=this,w=0;w<v.length;w++){var P=_(w);if("object"==typeof P)return P.value}},n.prototype.buildPath=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t=this.preprocessKeys.apply(this,l([],i(t),!1));for(var n=this,r=this.getClass().fromNullable(null),o=-1,a=function(t,e){for(var n=t.length,r=n+e,o=n;o<r;o++)t.push({})},s=0;s<t.length;s++){var u=this.keyVal(t[s]),f=this.arrayIndex(t[s]);if(this.isArrayPos(u,f))n.setVal(n.value instanceof Array?n.value:[]),a(n.value,f+1),o>=0&&(r.value[o]=n.value),r=n,o=f,n=this.getClass().fromNullable(n.value[f]);else{var c=n.getIf(u);if(this.isNoArray(f))c.isAbsent()?c=this.getClass().fromNullable(n.value[u]={}):n=c;else{var p=c.value instanceof Array?c.value:[];a(p,f+1),n.value[u]=p,c=this.getClass().fromNullable(p[f])}r=n,o=f,n=c}}return this},n.prototype.isNoArray=function(t){return-1==t},n.prototype.isArray=function(t){return!this.isNoArray(t)},n.prototype.isArrayPos=function(t,e){return""===t&&e>=0},n}(c);e.Config=y},376:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CancellablePromise=e.Promise=e.interval=e.timeout=e.PromiseStatus=void 0;var i,l=n(152);!function(t){t[t.PENDING=0]="PENDING",t[t.FULLFILLED=1]="FULLFILLED",t[t.REJECTED=2]="REJECTED"}(i=e.PromiseStatus||(e.PromiseStatus={})),e.timeout=function(t){var e=null;return new s((function(n,r){e=setTimeout((function(){return n()}),t)}),(function(){e&&(clearTimeout(e),e=null)}))},e.interval=function(t){var e=null;return new s((function(n,r){e=setInterval((function(){n()}),t)}),(function(){e&&(clearInterval(e),e=null)}))};var a=function(){function t(t){var e=this;this.status=i.PENDING,this.allFuncs=[],this.value=t,this.value((function(t){return e.resolve(t)}),(function(t){return e.reject(t)}))}return t.all=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r,o=0,i=new t((function(t,e){r=t})),l=function(){o++,e.length==o&&r()};l.__last__=!0;for(var a=0;a<e.length;a++)e[a].finally(l);return i},t.race=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r,o,i=new t((function(t,e){r=t,o=e})),l=function(){return r&&r(),r=null,o=null,null};l.__last__=!0;var a=function(){return o&&o(),o=null,r=null,null};a.__last__=!0;for(var s=0;s<e.length;s++)e[s].then(l),e[s].catch(a);return i},t.reject=function(e){return new t((function(n,r){e instanceof t?e.then((function(t){r(t)})):setTimeout((function(){r(e)}),1)}))},t.resolve=function(e){return new t((function(n,r){e instanceof t?e.then((function(t){return n(t)})):setTimeout((function(){n(e)}),1)}))},t.prototype.then=function(t,e){return this.allFuncs.push({then:t}),e&&this.allFuncs.push({catch:e}),this.spliceLastFuncs(),this},t.prototype.catch=function(t){return this.allFuncs.push({catch:t}),this.spliceLastFuncs(),this},t.prototype.finally=function(t){if(!this.__reason__)return this.allFuncs.push({finally:t}),this.spliceLastFuncs(),this;this.__reason__.finally(t)},t.prototype.resolve=function(e){for(;this.allFuncs.length&&this.allFuncs[0].then;){var n=this.allFuncs.shift(),r=l.Optional.fromNullable(n.then(e));if(!r.isPresent())break;if((e=(r=r.flatMap()).value)instanceof t)return void this.transferIntoNewPromise(e)}this.appyFinally(),this.status=i.FULLFILLED},t.prototype.reject=function(e){for(;this.allFuncs.length&&!this.allFuncs[0].finally;){var n=this.allFuncs.shift();if(n.catch){var r=l.Optional.fromNullable(n.catch(e));if(r.isPresent()){if((e=(r=r.flatMap()).value)instanceof t)return void this.transferIntoNewPromise(e);this.status=i.REJECTED;break}break}}this.status=i.REJECTED,this.appyFinally()},t.prototype.appyFinally=function(){for(;this.allFuncs.length;){var t=this.allFuncs.shift();t.finally&&t.finally()}},t.prototype.spliceLastFuncs=function(){for(var t=[],e=[],n=0;n<this.allFuncs.length;n++)for(var r in this.allFuncs[n])this.allFuncs[n][r].__last__?t.push(this.allFuncs[n]):e.push(this.allFuncs[n]);this.allFuncs=e.concat(t)},t.prototype.transferIntoNewPromise=function(t){for(var e=0;e<this.allFuncs.length;e++)for(var n in this.allFuncs[e])t[n](this.allFuncs[e][n])},t}();e.Promise=a;var s=function(t){function e(e,n){var r=t.call(this,e)||this;return r.cancellator=function(){},r.cancellator=n,r}return o(e,t),e.prototype.cancel=function(){this.status=i.REJECTED,this.appyFinally(),this.allFuncs=[]},e.prototype.then=function(e,n){return t.prototype.then.call(this,e,n)},e.prototype.catch=function(e){return t.prototype.catch.call(this,e)},e.prototype.finally=function(e){return t.prototype.finally.call(this,e)},e}(a);e.CancellablePromise=s}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();var r={};return function(){var t=r;Object.defineProperty(t,"__esModule",{value:!0});var e=n(376),o=n(456);Promise||(o._global$.Promise=e.Promise)}(),r}()}));
//# sourceMappingURL=PromiseShim.js.map