{"version":3,"file":"Es2019Array.js","mappings":"kDACA,IAAIA,EAAsB,CCA1BA,EAAwB,SAASC,EAASC,GACzC,IAAI,IAAIC,KAAOD,EACXF,EAAoBI,EAAEF,EAAYC,KAASH,EAAoBI,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAG3E,ECPAH,EAAwB,SAASS,EAAKC,GAAQ,OAAOL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,EAAO,ECCtGV,EAAwB,SAASC,GACX,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GACvD,G,wFCGA,MAAMC,UAAyBC,MAI3BC,eAAeC,GACXC,SAASD,GACLA,EAAgBE,SAChBC,KAAKD,SAAYF,EAAgBE,SAEjCC,KAAKD,SAAWF,EAKhBG,KAAKC,QAAWC,GAAeF,KAAKG,SAASD,GAG7CF,KAAKI,KAAO,CAACC,EAAoB,IAAML,KAAKM,MAAMD,EAE1D,CAEAE,IAAOC,EAAwDC,GAE3D,OAAO,IAAKC,KADAf,MAAMP,UAAUmB,IAAIjB,KAAKU,KAAKD,SAAUS,EAAYC,GAEpE,CAEAE,UAAUC,GAEN,OAAO,IAAKF,KADAf,MAAMP,UAAUuB,OAAOrB,KAAKU,KAAKD,YAAaa,GAE9D,CAEAC,UAEI,OAAO,IAAKH,KADAf,MAAMP,UAAUyB,QAAQvB,KAAKU,KAAKD,UAElD,CAEAe,MAAMC,EAAgBC,GAElB,OAAO,IAAKN,KADAf,MAAMP,UAAU0B,MAAMxB,KAAKU,KAAKD,SAAUgB,EAAOC,GAEjE,CAEAC,OAAOF,EAAeG,GAElB,OAAO,IAAKR,KADAf,MAAMP,UAAU6B,OAAO3B,KAAKU,KAAKD,SAAUgB,EAAOG,GAElE,CAEAC,OAAoBC,EAAyDX,GAEzE,OAAO,IAAKC,KADAf,MAAMP,UAAU+B,OAAO7B,KAAKU,KAAKD,SAAUqB,EAAWX,GAEtE,CAGAY,OAAOb,EAAwFc,GAE3F,OADY3B,MAAMP,UAAUiC,OAAO/B,KAAKU,KAAKD,SAAUS,EAAYc,EAEvE,CAOQhB,MAAMiB,EAAY,GACtB,OAAOvB,KAAKwB,aAAaxB,KAAKD,SAAUwB,EAC5C,CAEQC,aAAaC,EAAKF,EAAY,GAElC,GAAiB,GAAbA,EACA,OAAOE,EAEX,IAAIC,EAAM,GASV,OAFAD,EAAIE,SALSC,IACTA,EAAOjC,MAAMkC,QAAQD,GAAQA,EAAO,CAACA,GACrC,IAAIE,EAAS9B,KAAKwB,aAAaI,EAAML,EAAY,GACjDG,EAAMA,EAAIf,OAAOmB,EAAO,IAIrB,IAAIC,KAAeL,EAC9B,CAEQvB,SAAS6B,GACb,IAAIN,EAAM1B,KAAKO,KAAIqB,GAAQI,EAAeJ,KAC1C,OAAO5B,KAAKwB,aAAaE,EAC7B,EAOG,SAAShB,KAAmBuB,GAC/B,IAAIC,EAAM,IAAIxC,KAAmBuC,GAqBjC,OApBc,IAAIE,MAAuBD,EAAK,CAC1CjD,IAAImD,EAA+BC,EAAoBC,GACnD,MAAG,iBAAmBD,EAEXD,EAAOrC,SAASsC,GAEvBE,MAAMC,SAASH,IAGRD,EAAOC,GAFPD,EAAOrC,SAASsC,EAI/B,EAEAI,IAAIL,EAAQM,EAAUjD,GAGlB,OAFA2C,EAAOM,GAAYjD,EACnB2C,EAAOrC,SAAS2C,GAAYjD,GACrB,CACX,GAIR,CAOO,IAAIsC,EAAoBpC,MAAMP,UAAiB,QAAI,YAAe6C,GAMrE,OAAOA,aAAI,EAAJA,EAAMhC,SAAUgC,EAAOvB,KAAgBuB,EAClD,EAAIvB,E","sources":["webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./src/main/typescript/Users/werpu2/development/workspace/monadish/src/main/typescript/Es2019Array.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Extended array\n */\n\n/**\n * Extended array which adds various es 2019 shim functions to the normal array\n * We must remap all array producing functions in order to keep\n * the delegation active, once we are in!\n */\nclass Es2019Array_<T>  extends Array<T>{\n\n    _another: T[];\n\n    constructor(...another: T[]) {\n        super(...another);\n        if((another as any)._another)  {\n            this._another = (another as any)._another;\n        } else {\n            this._another = another;\n        }\n\n        //for testing it definitely runs into this branch because we are on es5 level\n        //if (!(<any>Array.prototype).flatMap) {\n            this.flatMap = (flatMapFun) => this._flatMap(flatMapFun) as any;\n        //}\n        //if (!(<any>Array.prototype).flat) {\n            this.flat = (flatLevel: number = 1) => this._flat(flatLevel);\n        //}\n    }\n\n    map<U>(callbackfn: (value: T, index: number, array: T[]) => U, thisArg?: any): U[] {\n        const ret = Array.prototype.map.call(this._another, callbackfn, thisArg);\n        return new (_Es2019Array as any) (... ret);\n    }\n\n    concat(...items): T[] {\n        const ret = Array.prototype.concat.call(this._another, ...items);\n        return new (_Es2019Array as any)(... ret);\n    }\n\n    reverse(): T[] {\n        const ret = Array.prototype.reverse.call(this._another);\n        return new (_Es2019Array as any)(... ret);\n    }\n\n    slice(start?: number, end?: number): T[] {\n        const ret = Array.prototype.slice.call(this._another, start, end);\n        return new (_Es2019Array as any)(...ret);\n    }\n\n    splice(start: number, deleteCount?: number): T[] {\n        const ret = Array.prototype.splice.call(this._another, start, deleteCount);\n        return new (_Es2019Array as any)(...ret);\n    }\n\n    filter<S extends T>(predicate: (value: T, index: number, array: T[]) => any, thisArg?: any): S[] {\n        const ret = Array.prototype.filter.call(this._another, predicate, thisArg);\n        return new (_Es2019Array as any)(...ret);\n    }\n\n\n    reduce(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: T[]) => T, initialValue?: T): T {\n        const ret = Array.prototype.reduce.call(this._another, callbackfn, initialValue);\n        return ret;\n    }\n\n    /*reduceRight(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: T[]) => T, initialValue: T): T {\n        const ret = Array.prototype.reduceRight.call(callbackfn, initialValue);\n        return ret;\n    }*/\n\n    private _flat(flatDepth = 1) {\n        return this._flatResolve(this._another, flatDepth);\n    }\n\n    private _flatResolve(arr, flatDepth = 1) {\n        //recursion break\n        if (flatDepth == 0) {\n            return arr;\n        }\n        let res = [];\n\n        let reFlat = item => {\n            item = Array.isArray(item) ? item : [item];\n            let mapped = this._flatResolve(item, flatDepth - 1);\n            res = res.concat(mapped);\n        };\n        arr.forEach(reFlat)\n\n        return new Es2019Array(...res);\n    }\n\n    private _flatMap(mapperFunction: Function): any {\n        let res = this.map(item => mapperFunction(item));\n        return this._flatResolve(res);\n    }\n}\n\n//let _Es2019Array = function<T>(...data: T[]) {};\n\n//let oldProto = Es2019Array.prototype;\n\nexport function _Es2019Array<T>(...data: T[]): Es2019Array_<T> {\n    let ret = new Es2019Array_<T>(...data);\n    let proxied = new Proxy<Es2019Array_<T>>(ret, {\n        get(target: Es2019Array_<unknown>, p: string | symbol, receiver: any): any {\n            if(\"symbol\" == typeof p) {\n\n                return target._another[p];\n            }\n            if(!isNaN(parseInt(p as string))) {\n                return target._another[p];\n            } else {\n                return target[p];\n            }\n        },\n\n        set(target, property, value): boolean {\n            target[property] = value;\n            target._another[property] = value;\n            return true;\n        }\n\n    });\n    return proxied;\n};\n\n/**\n * this is the switch between normal array and our shim\n * the shim is only provided in case the native browser\n * does not yet have flatMap support on arrays\n */\nexport var Es2019Array: any = (Array.prototype.flatMap) ? function<T>(...data: T[]): T[] {\n    // sometimes the typescript compiler produces\n    // an array without flatmap between boundaries (the result produces True for Array.isArray\n    // but has no flatMap function, could be a node issue also or Typescript!\n    // we remap that (could be related to: https://github.com/microsoft/TypeScript/issues/31033\n    // the check and remap fixes the issue which should not exist in the first place\n    return data?.flatMap ? data : _Es2019Array(...data);\n} : _Es2019Array;"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","Es2019Array_","Array","constructor","another","super","_another","this","flatMap","flatMapFun","_flatMap","flat","flatLevel","_flat","map","callbackfn","thisArg","_Es2019Array","concat","items","reverse","slice","start","end","splice","deleteCount","filter","predicate","reduce","initialValue","flatDepth","_flatResolve","arr","res","forEach","item","isArray","mapped","Es2019Array","mapperFunction","data","ret","Proxy","target","p","receiver","isNaN","parseInt","set","property"],"sourceRoot":""}