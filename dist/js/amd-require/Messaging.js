require(["rxjs"],(function(t){return function(){"use strict";var e={805:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.Lang=void 0;var n=r(152);!function(t){function e(t){for(var e=/\s/,r=(t=t.replace(/^\s\s*/,"")).length;e.test(t.charAt(--r)););return t.slice(0,r+1)}function r(t){return!!arguments.length&&null!=t&&("string"==typeof t||t instanceof String)}t.saveResolve=function(t,e){void 0===e&&(e=null);try{var r=t();return n.Optional.fromNullable(null!=r?r:e)}catch(t){return n.Optional.absent}},t.saveResolveLazy=function(t,e){void 0===e&&(e=null);try{var r=t();return n.Optional.fromNullable(null!=r?r:e())}catch(t){return n.Optional.absent}},t.strToArray=function(t,r){void 0===r&&(r=/\./gi);var n=[];return t.split(r).forEach((function(t){n.push(e(t))})),n},t.trim=e,t.objToArray=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=[]),"__undefined__"==(null!=t?t:"__undefined__")?null!=r?r:null:t instanceof Array&&!e&&!r?t:r.concat(Array.prototype.slice.call(t,e))},t.equalsIgnoreCase=function(t,e){var r=null!=e?e:"___no_value__";return(null!=t?t:"___no_value__").toLowerCase()===r.toLowerCase()},t.assertType=function(t,e){return r(e)?typeof t==e:t instanceof e},t.isString=r,t.isFunc=function(t){return t instanceof Function||"function"==typeof t},t.objAssign=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(null==t)throw new TypeError("Cannot convert undefined or null to object");var n=Object(t);return Object.assign?(e.forEach((function(t){return Object.assign(n,t)})),n):(e.filter((function(t){return null!=t})).forEach((function(t){var e=t;Object.keys(e).filter((function(t){return Object.prototype.hasOwnProperty.call(e,t)})).forEach((function(t){return n[t]=e[t]}))})),n)}}(e.Lang||(e.Lang={}))},493:function(t,e,r){var n,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,i=0,o=e.length;i<o;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.BrokerBuilder=e.Broker=e.BroadcastChannelBrokerBuilder=e.BroadcastChannelBroker=e.Message=e.NoCrypto=void 0;var a=r(382),u=r(551),l=function(){function t(){}return t.prototype.decode=function(t){return t},t.prototype.encode=function(t){return t},t}();e.NoCrypto=l;var c=new l,h=function(t,e){void 0===t&&(t={}),void 0===e&&(e="*"),this.message=t,this.encoded=!1,this.targetOrigin=e,this.creationDate=(new Date).getMilliseconds(),this.identifier=(new Date).getMilliseconds()+"_"+Math.random()+"_"+Math.random()};e.Message=h;var p=function(t,e){this.detail=e,this.bubbles=!0,this.cancelable=!0,this.composed=!0,this.channel=t},f=function(){function t(){this.messageListeners={},this.subjects={},this.processedMessages={},this.cleanupCnt=0,this.TIMEOUT_IN_MS=1e3,this.MSG_EVENT="message",this.crypto=c}return t.prototype.registerListener=function(t,e){var r=this;return this.reserveListenerNS(t),this.messageListeners[t].push((function(t){var n;t.identifier in r.processedMessages||(((null==t?void 0:t.encoded)||(null===(n=null==t?void 0:t.detail)||void 0===n?void 0:n.encoded))&&((null==t?void 0:t.detail)?(t.detail.message=r.crypto.decode(t.detail.message),t.detail.encoded=!1):(t.message=r.crypto.decode(t.message),t.encoded=!1)),e(t))})),this},t.prototype.asSubject=function(t){var e=this;this.reserveSubjectNS(t);var r=this.subjects[t],n=r.next;return r.next=function(i){(null==i?void 0:i.detail)?n.call(r,null==i?void 0:i.detail):e.broadcast(t,i)},r},t.prototype.asObservable=function(t){return this.asSubject(t).asObservable()},t.prototype.reserveListenerNS=function(t){this.messageListeners[t]||(this.messageListeners[t]=[]),this.messageListeners["*"]||(this.messageListeners["*"]=[])},t.prototype.reserveSubjectNS=function(t){this.subjects[t]||(this.subjects[t]=new a.Subject),this.subjects["*"]||(this.subjects["*"]=new a.Subject)},t.prototype.unregisterListener=function(t,e){return this.messageListeners[t]=(this.messageListeners[t]||[]).filter((function(t){return t!==e})),this},t.prototype.answer=function(e,r,n){if("string"==typeof r&&(r=new h(r)),!t.isAnswer(r))return n.identifier=t.getAnswerId(r),this.broadcast(e,n),this},t.getAnswerId=function(t){return"_r_"+t.identifier},t.isAnswer=function(t){return 0==t.identifier.indexOf("_r_")},t.prototype.request=function(t,e){var r=this;"string"==typeof e&&(e=new h(e));var n=e.identifier,i=new Promise((function(e,i){var o=null,s=function(i){i.identifier!=n&&i.identifier=="_r_"+n&&(clearTimeout(o),r.unregisterListener(t,s),e(i))};o=setTimeout((function(){r.unregisterListener(t,s),i("request message performed, timeout, no return value")}),3e3),r.registerListener(t,s)}));return this.broadcast(t,e),i},t.prototype.gcProcessedMessages=function(){var t=this;if(++this.cleanupCnt%10==0){var e={};Object.keys(this.processedMessages).forEach((function(r){t.messageStillActive(r)||(e[r]=t.processedMessages[r])})),this.processedMessages=e}},t.prototype.messageStillActive=function(t){return this.processedMessages[t]>(new Date).getMilliseconds()-this.TIMEOUT_IN_MS},t.prototype.markMessageAsProcessed=function(t){this.processedMessages[t.identifier]=t.creationDate},t.EVENT_TYPE="brokerEvent",t}(),v=function(t){if(null===window||void 0===window?void 0:window.BroadcastChannel)return new window.BroadcastChannel(t);throw Error("No Broadcast channel in the system, use a shim or provide a factory functionin the constructor")},y="brokr",d=function(t){function e(e,r,n){void 0===e&&(e=v),void 0===r&&(r=y),void 0===n&&(n=c);var i=t.call(this)||this;return i.brokerFactory=e,i.channelGroup=r,i.crypto=n,i.openChannels={},i.msgListener=function(t){var e,r;t.detail.encoded&&(t.detail.message=i.crypto.decode(t.detail.message),t.detail.encoded=!1);var n=t.detail,o=t.channel;return(null===(e=i.messageListeners)||void 0===e?void 0:e[o])&&(null===(r=i.messageListeners)||void 0===r||r[o].forEach((function(t){t(n)}))),i.markMessageAsProcessed(n),!0},i.crypto=n,i.register(),i}return i(e,t),e.prototype.broadcast=function(t,e,r){void 0===r&&(r=!0);try{"string"==typeof e&&(e=new h(e));var n=JSON.stringify(e);e=JSON.parse(n);var i=new p(t,e);i.detail.message=this.crypto.encode(i.detail.message),i.detail.encoded=!0,(null==this?void 0:this.subjects[t])&&this.subjects[t].next(i),this.openChannels[this.channelGroup].postMessage(i),r&&this.msgListener(i)}finally{this.gcProcessedMessages()}return this},e.prototype.registerListener=function(e,r){return t.prototype.registerListener.call(this,e,r),this},e.prototype.register=function(){return this.openChannels[this.channelGroup]||(this.openChannels[this.channelGroup]=this.brokerFactory(this.channelGroup)),this.openChannels[this.channelGroup].addEventListener("message",this.msgListener),this},e.prototype.unregister=function(){return this.openChannels[this.channelGroup].close(),this},e}(f);e.BroadcastChannelBroker=d;var g=function(){function t(){this.broadCastChannelGenerator=v,this.channelGroup=y,this.crypto=c,this.listeners=[]}return t.prototype.withGeneratorFunc=function(t){return this.broadCastChannelGenerator=t,this},t.prototype.withListener=function(t){for(var e=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return u.Stream.of.apply(u.Stream,s([],o(r),!1)).each((function(r){e.listeners.push({channel:t,listener:r})})),this},t.prototype.withChannelGroup=function(t){return this.channelGroup=t,this},t.prototype.withCrypto=function(t){return this.crypto=t,this},t.prototype.build=function(){var t=new d(this.broadCastChannelGenerator,this.channelGroup,this.crypto);return u.Stream.of.apply(u.Stream,s([],o(this.listeners),!1)).each((function(e){t.registerListener(e.channel,e.listener)})),t},t}();e.BroadcastChannelBrokerBuilder=g;var m=function(t){function e(e,r,n){void 0===e&&(e=window),void 0===r&&(r="brokr"),void 0===n&&(n=c);var i=t.call(this)||this;i.brokerGroup=r;return i.msgHandler=function(t){return function(t){var e,r,n,o,s=null!==(e=null==t?void 0:t.detail)&&void 0!==e?e:null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.detail,a=null!==(o=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.channel)&&void 0!==o?o:null==t?void 0:t.channel;if((null==s?void 0:s.identifier)&&(null==s?void 0:s.message)){var u=s;if(u.identifier in i.processedMessages)return;null==t||t.detail,i.broadcast(a,u)}}(t)},i.crypto=n,i.register(e),i}return i(e,t),e.prototype.register=function(t){(this.rootElem=t.host?t.host:t,t.host)?t.host.setAttribute("data-broker","1"):(null==t?void 0:t.setAttribute)&&t.setAttribute("data-broker","1");return this.rootElem.addEventListener(this.brokerGroup+"__||__"+e.EVENT_TYPE,this.msgHandler,{capture:!0}),this.rootElem.addEventListener(this.brokerGroup+"__||__"+e.EVENT_TYPE+this.MSG_EVENT,this.msgHandler,{capture:!0}),this},e.prototype.unregister=function(){return this.rootElem.removeEventListener(this.brokerGroup+"__||__"+e.EVENT_TYPE,this.msgHandler),this.rootElem.removeEventListener(this.brokerGroup+"__||__"+this.MSG_EVENT,this.msgHandler),this},e.prototype.broadcast=function(t,e){if("string"==typeof e&&(e=new h(e)),null==this?void 0:this.subjects[t]){var r=new p(t,e);r.detail.encoded||(r.detail.message=this.crypto.encode(r.detail.message),r.detail.encoded=!0),this.subjects[t].next(r)}try{this.dispatchUp(t,e,!1,!0),this.dispatchDown(t,e,!0,!1)}finally{this.gcProcessedMessages()}return this},e.prototype.dispatchUp=function(t,e,r,n){if(void 0===r&&(r=!0),void 0===n&&(n=!0),r||this.msgCallListeners(t,e),this.markMessageAsProcessed(e),null!=window.parent){var i=new p(t,e);window.parent.postMessage(JSON.parse(JSON.stringify(i)),e.targetOrigin)}n&&this.dispatchSameLevel(t,e)},e.prototype.dispatchSameLevel=function(t,e){var r=this.transformToEvent(t,e,!0);window.dispatchEvent(r)},e.prototype.dispatchDown=function(t,e,r,n){void 0===r&&(r=!0),void 0===n&&(n=!0),r||this.msgCallListeners(t,e),this.processedMessages[e.identifier]=e.creationDate;var i=this.transformToEvent(t,e);Array.prototype.slice.call(document.querySelectorAll("iframe")).forEach((function(r){var n=new p(t,e);r.contentWindow.postMessage(JSON.parse(JSON.stringify(n)),e.targetOrigin)})),Array.prototype.slice.call(document.querySelectorAll("[data-broker='1']")).forEach((function(t){return t.dispatchEvent(i)})),n&&this.dispatchSameLevel(t,e)},e.prototype.msgCallListeners=function(t,e){var r=this.messageListeners[t];if(null==r?void 0:r.length){r.forEach((function(t){t(e)}))}},e.prototype.transformToEvent=function(t,r,n){void 0===n&&(n=!1);var i=new p(t,r);return i.bubbles=n,e.createCustomEvent(this.brokerGroup+"__||__"+e.EVENT_TYPE,i)},e.createCustomEvent=function(t,e){if("function"!=typeof window.CustomEvent){var r=document.createEvent("HTMLEvents");return r.detail=e.detail,r.channel=e.channel,r.initEvent(t,e.bubbles,e.cancelable),r}var n=new window.CustomEvent(t,e);return n.channel=e.channel,n},e}(f);e.Broker=m;var b=function(){function t(){this.scopeElement=window,this.channelGroup=y,this.crypto=c,this.listeners=[]}return t.prototype.withScopeElement=function(t){return this.scopeElement=t,this},t.prototype.withListener=function(t){for(var e=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return u.Stream.of.apply(u.Stream,s([],o(r),!1)).each((function(r){e.listeners.push({channel:t,listener:r})})),this},t.prototype.withChannelGroup=function(t){return this.channelGroup=t,this},t.prototype.withCrypto=function(t){return this.crypto=t,this},t.prototype.build=function(){var t=new m(this.scopeElement,this.channelGroup,this.crypto);return u.Stream.of.apply(u.Stream,s([],o(this.listeners),!1)).each((function(e){t.registerListener(e.channel,e.listener)})),t},t}();e.BrokerBuilder=b},152:function(t,e,r){var n,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,i=0,o=e.length;i<o;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.Config=e.ValueEmbedder=e.Optional=e.Monad=void 0;var a=r(805),u=r(255),l=r(551),c=a.Lang.objAssign,h=function(){function t(t){this._value=t}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),t.prototype.map=function(e){return e||(e=function(t){return t}),new t(e(this.value))},t.prototype.flatMap=function(e){for(var r=this.map(e);(null==r?void 0:r.value)instanceof t;)r=r.value;return r},t}();e.Monad=h;var p=function(t){function e(e){return t.call(this,e)||this}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value instanceof h?this._value.flatMap().value:this._value},enumerable:!1,configurable:!0}),e.fromNullable=function(t){return new e(t)},e.prototype.isAbsent=function(){return void 0===this.value||null==this.value},e.prototype.isPresent=function(t){var e=this.isAbsent();return!e&&t&&t.call(this,this),!e},e.prototype.ifPresentLazy=function(t){return void 0===t&&(t=function(){}),this.isPresent.call(this,t),this},e.prototype.orElse=function(t){return this.isPresent()?this:null==t?e.absent:this.flatMap((function(){return t}))},e.prototype.orElseLazy=function(t){return this.isPresent()?this:this.flatMap(t)},e.prototype.flatMap=function(r){var n=t.prototype.flatMap.call(this,r);return n instanceof e?n.flatMap():e.fromNullable(n.value)},e.prototype.getIf=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=this,n=0;n<t.length;n++){var i=this.keyVal(t[n]),o=this.arrayIndex(t[n]);if(""===i&&o>=0){if((r=this.getClass().fromNullable(r.value instanceof Array?r.value.length<o?null:r.value[o]:null)).isAbsent())return r}else if(i&&o>=0){if(r.getIfPresent(i).isAbsent())return r;if((r=r.getIfPresent(i).value instanceof Array?this.getClass().fromNullable(r.getIfPresent(i).value[o]):this.getClass().absent).isAbsent())return r}else{if((r=r.getIfPresent(i)).isAbsent())return r;o>-1&&(r=this.getClass().fromNullable(r.value[o]))}}return r},e.prototype.match=function(t){return!this.isAbsent()&&t(this.value)},e.prototype.get=function(t){return void 0===t&&(t=e.absent),this.isAbsent()?this.getClass().fromNullable(t).flatMap():this.getClass().fromNullable(this.value).flatMap()},e.prototype.toJson=function(){return JSON.stringify(this.value)},e.prototype.getClass=function(){return e},e.prototype.arrayIndex=function(t){var e=t.indexOf("["),r=t.indexOf("]");return e>=0&&r>0&&e<r?parseInt(t.substring(e+1,r)):-1},e.prototype.keyVal=function(t){var e=t.indexOf("[");return e>=0?t.substring(0,e):t},e.prototype.getIfPresent=function(t){return this.isAbsent()?this.getClass().absent:this.getClass().fromNullable(this.value[t]).flatMap()},e.prototype.resolve=function(t){if(this.isAbsent())return e.absent;try{return e.fromNullable(t(this.value))}catch(t){return e.absent}},e.absent=e.fromNullable(null),e}(h);e.Optional=p;var f=function(t){function e(e,r){void 0===r&&(r="value");var n=t.call(this,e)||this;return n.key=r,n}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value?this._value[this.key]:null},set:function(t){this._value&&(this._value[this.key]=t)},enumerable:!1,configurable:!0}),e.prototype.orElse=function(t){var r={};return r[this.key]=t,this.isPresent()?this:new e(r,this.key)},e.prototype.orElseLazy=function(t){if(this.isPresent())return this;var r={};return r[this.key]=t(),new e(r,this.key)},e.prototype.getClass=function(){return e},e.fromNullable=function(t,r){return void 0===r&&(r="value"),new e(t,r)},e.absent=e.fromNullable(null),e}(p);e.ValueEmbedder=f;var v=function(t){function e(e,r,n){var i=t.call(this,e,r)||this;return i.arrPos=null!=n?n:-1,i}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return""==this.key&&this.arrPos>=0?this._value[this.arrPos]:this.key&&this.arrPos>=0?this._value[this.key][this.arrPos]:this._value[this.key]},set:function(t){""==this.key&&this.arrPos>=0?this._value[this.arrPos]=t:this.key&&this.arrPos>=0?this._value[this.key][this.arrPos]=t:this._value[this.key]=t},enumerable:!1,configurable:!0}),e.absent=e.fromNullable(null),e}(f),y=function(t){function e(e){return t.call(this,e)||this}return i(e,t),Object.defineProperty(e.prototype,"shallowCopy",{get:function(){return new e(l.Stream.ofAssoc(this.value).collect(new u.AssocArrayCollector))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deepCopy",{get:function(){return new e(c({},this.value))},enumerable:!1,configurable:!0}),e.fromNullable=function(t){return new e(t)},e.prototype.shallowMerge=function(t,e,r){var n=this;void 0===e&&(e=!0),void 0===r&&(r=!1);var i=function(i){!e&&i in a.value||(r?Array.isArray(t.getIf(i).value)?l.Stream.of.apply(l.Stream,s([],o(t.getIf(i).value),!1)).each((function(t){return n.append(i).value=t})):a.append(i).value=t.getIf(i).value:a.assign(i).value=t.getIf(i).value)},a=this;for(var u in t.value)i(u)},e.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length<1;if(!r){var n=t[t.length-1],i=(this.keyVal(n),this.getIf.apply(this,s([],o(t),!1)).isPresent());this.buildPath(t);var a=this.arrayIndex(n);if(a>-1)throw Error("Append only possible on non array properties, use assign on indexed data");var u=this.getIf.apply(this,s([],o(t),!1)).value;Array.isArray(u)||(u=this.assign.apply(this,s([],o(t),!1)).value=[u]),i&&u.push({}),a=u.length-1;var l=new v(1==t.length?this.value:this.getIf.apply(this,t.slice(0,t.length-1)).value,n,a);return l}},e.prototype.appendIf=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return t?this.append.apply(this,s([],o(e),!1)):{value:null}},e.prototype.assign=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!(t.length<1)){this.buildPath(t);var r=this.keyVal(t[t.length-1]),n=this.arrayIndex(t[t.length-1]),i=new v(1==t.length?this.value:this.getIf.apply(this,t.slice(0,t.length-1)).value,r,n);return i}},e.prototype.assignIf=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return t?this.assign.apply(this,s([],o(e),!1)):{value:null}},e.prototype.getIf=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.getClass().fromNullable(t.prototype.getIf.apply(this,e).value)},e.prototype.get=function(e){return this.getClass().fromNullable(t.prototype.get.call(this,e).value)},e.prototype.delete=function(t){return t in this.value&&delete this.value[t],this},e.prototype.toJson=function(){return JSON.stringify(this.value)},e.prototype.getClass=function(){return e},e.prototype.setVal=function(t){this._value=t},e.prototype.buildPath=function(t){for(var e=this,r=this.getClass().fromNullable(null),n=-1,i=function(t,e){for(var r=t.length,n=r+e,i=r;i<n;i++)t.push({})},o=0;o<t.length;o++){var s=this.keyVal(t[o]),a=this.arrayIndex(t[o]);if(""===s&&a>=0)e.setVal(e.value instanceof Array?e.value:[]),i(e.value,a+1),n>=0&&(r.value[n]=e.value),r=e,n=a,e=this.getClass().fromNullable(e.value[a]);else{var u=e.getIf(s);if(-1==a)u.isAbsent()?u=this.getClass().fromNullable(e.value[s]={}):e=u;else{var l=u.value instanceof Array?u.value:[];i(l,a+1),e.value[s]=l,u=this.getClass().fromNullable(l[a])}r=e,n=a,e=u}}return this},e}(p);e.Config=y},255:function(t,e,r){var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,i=0,o=e.length;i<o;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.QueryFormStringCollector=e.QueryFormDataCollector=e.FormDataCollector=e.AssocArrayCollector=e.Run=e.ArrayAssocArrayCollector=e.ArrayCollector=e.FlatMapStreamDataSource=e.MappedStreamDataSource=e.FilteredStreamDatasource=e.ArrayStreamDataSource=e.SequenceDataSource=void 0;var o=r(551),s=function(){function t(t,e){this.total=e,this.start=t,this.value=t-1}return t.prototype.hasNext=function(){return this.value<this.total-1},t.prototype.next=function(){return this.value++,Math.min(this.value,this.total-1)},t.prototype.back=function(t){return void 0===t&&(t=1),this.value=Math.max(this.value-t,this.start)},t.prototype.reset=function(){this.value=this.start-1},t.prototype.current=function(){return this.value==this.start-1?this.start:this.value},t}();e.SequenceDataSource=s;var a=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.dataPos=-1,this.value=t}return t.prototype.hasNext=function(){return this.value.length-1>this.dataPos},t.prototype.next=function(){return this.dataPos++,this.value[this.dataPos]},t.prototype.reset=function(){this.dataPos=-1},t.prototype.back=function(t){return void 0===t&&(t=1),this.dataPos=Math.max(this.dataPos-t,-1),this.value[Math.max(this.dataPos,0)]},t.prototype.current=function(){return this.value[Math.max(0,this.dataPos)]},t}();e.ArrayStreamDataSource=a;var u=function(){function t(t,e){this._filterIdx={},this._unfilteredPos=0,this._nextStack=[],this.filterFunc=t,this.inputDataSource=e}return t.prototype.hasNext=function(){for(var t=0,e=null;this.inputDataSource.hasNext();){t++;var r=this.inputDataSource.next();if(this.filterFunc(r)){this._filterIdx[this._unfilteredPos+t]=!0,e=r,this._nextStack.push(r);break}this._filterIdx[this._unfilteredPos+t]=!1}return t&&this.inputDataSource.back(t),null!=e},t.prototype.next=function(){for(var t,e,r=null;this.inputDataSource.hasNext();){this._unfilteredPos++;var n=this.inputDataSource.next();if(null!==(e=null===(t=this._filterIdx)||void 0===t?void 0:t[this._unfilteredPos])&&void 0!==e?e:this.filterFunc(n)){this._filterIdx[this._unfilteredPos]=!0,r=n;break}}return this._current=r,r},t.prototype.current=function(){return null==this._current?this.next():this._current},t.prototype.back=function(t){var e;void 0===t&&(t=1);for(var r=null;t>=0&&this._unfilteredPos>0;){r=this.inputDataSource.back(1),t=!!(null===(e=this._filterIdx)||void 0===e?void 0:e[this._unfilteredPos])?t-1:t,this._unfilteredPos--}return r},t.prototype.reset=function(){this._current=null,this._filterIdx={},this.inputDataSource.reset()},t}();e.FilteredStreamDatasource=u;var l=function(){function t(t,e){this.mapFunc=t,this.inputDataSource=e}return t.prototype.hasNext=function(){return this.inputDataSource.hasNext()},t.prototype.next=function(){return this.mapFunc(this.inputDataSource.next())},t.prototype.reset=function(){this.inputDataSource.reset()},t.prototype.back=function(t){return void 0===t&&(t=1),this.mapFunc(this.inputDataSource.back(t))},t.prototype.current=function(){return this.mapFunc(this.inputDataSource.current())},t}();e.MappedStreamDataSource=l;var c=function(){function t(t,e){this.walkedDataSources=[],this._currPos=0,this.mapFunc=t,this.inputDataSource=e}return t.prototype.hasNext=function(){return this.resolveActiveHasNext()||this.resolveNextHasNext()},t.prototype.resolveActiveHasNext=function(){var t=!1;return this.activeDataSource&&(t=this.activeDataSource.hasNext()),t},t.prototype.resolveNextHasNext=function(){for(var t=!1;!t&&this.inputDataSource.hasNext();){var e=this.mapFunc(this.inputDataSource.next());this.activeDataSource&&this.walkedDataSources.push({pos:this._currPos,datasource:this.activeDataSource}),Array.isArray(e)?this.activeDataSource=new(a.bind.apply(a,i([void 0],n(e),!1))):this.activeDataSource=e,t=this.activeDataSource.hasNext()}return t},t.prototype.next=function(){if(this.hasNext())return this._currPos++,this.activeDataSource.next()},t.prototype.reset=function(){this.inputDataSource.reset(),this.walkedDataSources=[],this._currPos=0},t.prototype.back=function(t){void 0===t&&(t=1);var e=null;if(!this.walkedDataSources.length)return this.activeDataSource.back(t);for(;!e&&this.walkedDataSources.length;){var r=this.walkedDataSources.pop();if(this._currPos-t<=r.pos){this.activeDataSource=r.datasource,this.activeDataSource.reset();var n=this._currPos-r.pos-t;this._currPos=r.pos+n;for(var i=0;i<n;i++)e=this.activeDataSource.next()}}return e},t.prototype.current=function(){return this.activeDataSource||this.hasNext(),this.activeDataSource.current()},t}();e.FlatMapStreamDataSource=c;var h=function(){function t(){this.data=[]}return t.prototype.collect=function(t){this.data.push(t)},Object.defineProperty(t.prototype,"finalValue",{get:function(){return this.data},enumerable:!1,configurable:!0}),t}();e.ArrayCollector=h;var p=function(){function t(){this.finalValue={}}return t.prototype.collect=function(t){var e,r,n,i,o=null!==(e=null==t?void 0:t[0])&&void 0!==e?e:t;this.finalValue[o]=null!==(n=null===(r=this.finalValue)||void 0===r?void 0:r[o])&&void 0!==n?n:[],this.finalValue[o].push(null===(i=null==t?void 0:t[1])||void 0===i||i)},t}();e.ArrayAssocArrayCollector=p;var f=function(){function t(){}return t.prototype.collect=function(t){},Object.defineProperty(t.prototype,"finalValue",{get:function(){return null},enumerable:!1,configurable:!0}),t}();e.Run=f;var v=function(){function t(){this.finalValue={}}return t.prototype.collect=function(t){var e,r;this.finalValue[null!==(e=t[0])&&void 0!==e?e:t]=null===(r=t[1])||void 0===r||r},t}();e.AssocArrayCollector=v;var y=function(){function t(){this.finalValue=new FormData}return t.prototype.collect=function(t){this.finalValue.append(t.key,t.value)},t}();e.FormDataCollector=y;var d=function(){function t(){this.finalValue=new FormData}return t.prototype.collect=function(t){var e=t.encodeFormElement();e.isPresent()&&this.finalValue.append(t.name.value,e.get(t.name).value)},t}();e.QueryFormDataCollector=d;var g=function(){function t(){this.formData=[]}return t.prototype.collect=function(t){var e=t.encodeFormElement();e.isPresent()&&this.formData.push([t.name.value,e.get(t.name).value])},Object.defineProperty(t.prototype,"finalValue",{get:function(){return o.Stream.of.apply(o.Stream,i([],n(this.formData),!1)).map((function(t){return t.join("=")})).reduce((function(t,e){return[t,e].join("&")})).orElse("").value},enumerable:!1,configurable:!0}),t}();e.QueryFormStringCollector=g},551:function(t,e,r){var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,i=0,o=e.length;i<o;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.LazyStream=e.Stream=void 0;var o=r(152),s=r(255),a=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._limits=-1,this.pos=-1,this.value=t}return t.of=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new(t.bind.apply(t,i([void 0],n(e),!1)))},t.ofAssoc=function(t){return this.of.apply(this,i([],n(Object.keys(t)),!1)).map((function(e){return[e,t[e]]}))},t.ofDataSource=function(e){for(var r=[];e.hasNext();)r.push(e.next());return new(t.bind.apply(t,i([void 0],n(r),!1)))},t.prototype.limits=function(t){return this._limits=t,this},t.prototype.concat=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.of.apply(t,i([this],n(e),!1)).flatMap((function(t){return t}))},t.prototype.onElem=function(t){for(var e=0;e<this.value.length&&(-1==this._limits||e<this._limits)&&!1!==t(this.value[e],e);e++);return this},t.prototype.each=function(t){this.onElem(t)},t.prototype.map=function(e){e||(e=function(t){return t});var r=[];return this.each((function(t,n){r.push(e(t))})),new(t.bind.apply(t,i([void 0],n(r),!1)))},t.prototype.flatMap=function(e){var r=[];return this.each((function(t){var o=e(t);r=Array.isArray(o)?r.concat(o):r.concat.apply(r,i([],n(o.value),!1))})),t.of.apply(t,i([],n(r),!1))},t.prototype.filter=function(e){var r=[];return this.each((function(t){e(t)&&r.push(t)})),new(t.bind.apply(t,i([void 0],n(r),!1)))},t.prototype.reduce=function(t,e){void 0===e&&(e=null);for(var r=null!=e?0:1,n=null!=e?e:this.value.length?this.value[0]:null,i=r;i<this.value.length&&(-1==this._limits||i<this._limits);i++)n=t(n,this.value[i]);return o.Optional.fromNullable(n)},t.prototype.first=function(){return this.value&&this.value.length?o.Optional.fromNullable(this.value[0]):o.Optional.absent},t.prototype.last=function(){var t=this._limits>0?Math.min(this._limits,this.value.length):this.value.length;return o.Optional.fromNullable(t?this.value[t-1]:null)},t.prototype.anyMatch=function(t){for(var e=0;e<this.value.length&&(-1==this._limits||e<this._limits);e++)if(t(this.value[e]))return!0;return!1},t.prototype.allMatch=function(t){if(!this.value.length)return!1;for(var e=0,r=0;r<this.value.length;r++)t(this.value[r])&&e++;return e==this.value.length},t.prototype.noneMatch=function(t){for(var e=0,r=0;r<this.value.length;r++)t(this.value[r])||e++;return e==this.value.length},t.prototype.sort=function(e){var r=this.value.slice().sort(e);return t.of.apply(t,i([],n(r),!1))},t.prototype.collect=function(t){return this.each((function(e){return t.collect(e)})),t.finalValue},t.prototype.hasNext=function(){var t=-1!=this._limits&&this.pos>=this._limits-1,e=this.pos>=this.value.length-1;return!(t||e)},t.prototype.next=function(){return this.hasNext()?(this.pos++,this.value[this.pos]):null},t.prototype.back=function(t){return void 0===t&&(t=1),this.pos=Math.max(this.pos-1,-1),this.value[Math.max(this.pos,0)]},t.prototype[Symbol.iterator]=function(){var t=this;return{next:function(){return{done:!t.hasNext(),value:t.next()}}}},t.prototype.reset=function(){this.pos=-1},t}();e.Stream=a;var u=function(){function t(t){this._limits=-1,this.pos=-1,this.dataSource=t}return t.of=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new t(new(s.ArrayStreamDataSource.bind.apply(s.ArrayStreamDataSource,i([void 0],n(e),!1))))},t.ofAssoc=function(t){return this.of.apply(this,i([],n(Object.keys(t)),!1)).map((function(e){return[e,t[e]]}))},t.ofStreamDataSource=function(e){return new t(e)},t.prototype.hasNext=function(){return!this.isOverLimits()&&this.dataSource.hasNext()},t.prototype.next=function(){var t=this.dataSource.next();return this.pos++,t},t.prototype.back=function(t){void 0===t&&(t=1);var e=this.dataSource.back(t);return this.pos=Math.max(-1,this.pos-t),e},t.prototype.current=function(){return this.dataSource.current()},t.prototype.reset=function(){this.dataSource.reset(),this.pos=-1,this._limits=-1},t.prototype.concat=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.of.apply(t,i([this],n(e),!1)).flatMap((function(t){return t}))},t.prototype.nextFilter=function(t){if(this.hasNext()){var e=this.next();return t(e)?e:this.nextFilter(t)}return null},t.prototype.limits=function(t){return this._limits=t,this},t.prototype.collect=function(t){for(;this.hasNext();){var e=this.next();t.collect(e)}return t.finalValue},t.prototype.onElem=function(e){var r=this;return new t(new s.MappedStreamDataSource((function(t){return!1===e(t,r.pos)&&r.stop(),t}),this))},t.prototype.filter=function(e){return new t(new s.FilteredStreamDatasource(e,this))},t.prototype.map=function(e){return new t(new s.MappedStreamDataSource(e,this))},t.prototype.flatMap=function(e){return new t(new s.FlatMapStreamDataSource(e,this))},t.prototype.each=function(t){for(;this.hasNext();)!1===t(this.next())&&this.stop()},t.prototype.reduce=function(t,e){if(void 0===e&&(e=null),!this.hasNext())return o.Optional.absent;var r=null,n=null;if(null!=e)r=e,n=this.next();else{if(r=this.next(),!this.hasNext())return o.Optional.fromNullable(r);n=this.next()}for(r=t(r,n);this.hasNext();)r=t(r,n=this.next());return o.Optional.fromNullable(r)},t.prototype.last=function(){return this.hasNext()?this.reduce((function(t,e){return e})):o.Optional.absent},t.prototype.first=function(){return this.reset(),this.hasNext()?o.Optional.fromNullable(this.next()):o.Optional.absent},t.prototype.anyMatch=function(t){for(;this.hasNext();)if(t(this.next()))return!0;return!1},t.prototype.allMatch=function(t){for(;this.hasNext();)if(!t(this.next()))return!1;return!0},t.prototype.noneMatch=function(t){for(;this.hasNext();)if(t(this.next()))return!1;return!0},t.prototype.sort=function(e){var r=this.collect(new s.ArrayCollector);return r=r.sort(e),t.of.apply(t,i([],n(r),!1))},Object.defineProperty(t.prototype,"value",{get:function(){return this.collect(new s.ArrayCollector)},enumerable:!1,configurable:!0}),t.prototype[Symbol.iterator]=function(){var t=this;return{next:function(){return{done:!t.hasNext(),value:t.next()}}}},t.prototype.stop=function(){this.pos=this._limits+1e9,this._limits=0},t.prototype.isOverLimits=function(){return-1!=this._limits&&this.pos>=this._limits-1},t}();e.LazyStream=u},382:function(e){e.exports=t}},r={};var n=function t(n){var i=r[n];if(void 0!==i)return i.exports;var o=r[n]={exports:{}};return e[n].call(o.exports,o,o.exports,t),o.exports}(493);return n}()}));
//# sourceMappingURL=Messaging.js.map