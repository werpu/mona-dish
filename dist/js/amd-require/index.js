require(["rxjs"],(function(e){return function(){"use strict";var t={585:function(e,t,r){r.d(t,{DQ:function(){return b},DQ$:function(){return E},DomQuery:function(){return g},DomQueryCollector:function(){return y},ElementAttribute:function(){return v}});var s,n=r(152),i=r(255),l=r(805),a=r(456),o=r(484),u=function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function l(e){try{o(s.next(e))}catch(e){i(e)}}function a(e){try{o(s.throw(e))}catch(e){i(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(l,a)}o((s=s.apply(e,t||[])).next())}))},h=l.Lang.trim,c=l.Lang.isString,d=l.Lang.equalsIgnoreCase,f=l.Lang.objToArray;!function(e){e.SELECT="select",e.BUTTON="button",e.SUBMIT="submit",e.RESET="reset",e.IMAGE="image",e.RADIO="radio",e.CHECKBOX="checkbox"}(s||(s={}));class v extends n.ValueEmbedder{constructor(e,t,r=null){super(e,t),this.element=e,this.name=t,this.defaultVal=r}get value(){let e=this.element.get(0).orElse().values;return e.length?e[0].getAttribute(this.name):this.defaultVal}set value(e){let t=this.element.get(0).orElse().values;for(let r=0;r<t.length;r++)t[r].setAttribute(this.name,e);t[0].setAttribute(this.name,e)}getClass(){return v}static fromNullable(e,t="value"){return new v(e,t)}}class p extends n.ValueEmbedder{constructor(e,t,r=null){super(e,t),this.element=e,this.name=t,this.defaultVal=r}get value(){let e=this.element.values;return e.length?e[0].style[this.name]:this.defaultVal}set value(e){let t=this.element.values;for(let r=0;r<t.length;r++)t[r].style[this.name]=e}getClass(){return v}static fromNullable(e,t="value"){return new v(e,t)}}const m=()=>!0;class g{constructor(...e){if(this.rootNode=[],this.pos=-1,this._limits=-1,!n.Optional.fromNullable(e).isAbsent()&&e.length)for(let t=0;t<e.length;t++)if(e[t])if(c(e[t])){let r=g.querySelectorAll(e[t]);r.isAbsent()||e.push(...r.values)}else e[t]instanceof g?this.rootNode.push(...e[t].values):this.rootNode.push(e[t]);else;}get value(){return this.getAsElem(0)}get values(){return this.allElems()}get global(){return a.R}get id(){return new v(this.get(0),"id")}get length(){return this.rootNode.length}get tagName(){return this.getAsElem(0).getIf("tagName")}get nodeName(){return this.getAsElem(0).getIf("nodeName")}isTag(e){return!this.isAbsent()&&(this.nodeName.orElse("__none___").value.toLowerCase()==e.toLowerCase()||this.tagName.orElse("__none___").value.toLowerCase()==e.toLowerCase())}get type(){return this.getAsElem(0).getIf("type")}get name(){return new n.ValueEmbedder(this.getAsElem(0).value,"name")}get inputValue(){return this.getAsElem(0).getIf("value").isPresent()?new n.ValueEmbedder(this.getAsElem(0).value):n.ValueEmbedder.absent}get val(){return this.inputValue.value}set val(e){this.inputValue.value=e}get nodeId(){return this.id.value}set nodeId(e){this.id.value=e}get checked(){return new o.Es2019Array(...this.values).every((e=>!!e.checked))}set checked(e){this.eachElem((t=>t.checked=e))}get elements(){return this.querySelectorAll("input, checkbox, select, textarea, fieldset")}get deepElements(){return this.querySelectorAllDeep("input, select, textarea, checkbox, fieldset")}querySelectorAllDeep(e){let t=[],r=this.querySelectorAll(e);r.length&&t.push(r);let s=this.querySelectorAll("*").shadowRoot;if(s.length){let r=s.querySelectorAllDeep(e);r.length&&t.push(r)}return new g(...t)}get disabled(){return this.attr("disabled").isPresent()}set disabled(e){e?this.attr("disabled").value="disabled":this.removeAttribute("disabled")}removeAttribute(e){this.eachElem((t=>t.removeAttribute(e)))}get childNodes(){let e=[];return this.eachElem((t=>{e=e.concat(f(t.childNodes))})),new g(...e)}get asArray(){return new o.Es2019Array(...this.rootNode).filter((e=>null!=e)).map((e=>g.byId(e)))}get offsetWidth(){return new o.Es2019Array(...this.rootNode).filter((e=>null!=e)).map((e=>e.offsetWidth)).reduce(((e,t)=>e+t),0)}get offsetHeight(){return new o.Es2019Array(...this.rootNode).filter((e=>null!=e)).map((e=>e.offsetHeight)).reduce(((e,t)=>e+t),0)}get offsetLeft(){return new o.Es2019Array(...this.rootNode).filter((e=>null!=e)).map((e=>e.offsetLeft)).reduce(((e,t)=>e+t),0)}get offsetTop(){return new o.Es2019Array(this.rootNode).filter((e=>null!=e)).map((e=>e.offsetTop)).reduce(((e,t)=>e+t),0)}get asNodeArray(){return new o.Es2019Array(...this.rootNode.filter((e=>null!=e)))}static querySelectorAllDeep(e){return new g(document).querySelectorAllDeep(e)}static querySelectorAll(e){return-1!=e.indexOf("/shadow/")?new g(document)._querySelectorAllDeep(e):new g(document)._querySelectorAll(e)}static byId(e,t=!1){return c(e)?t?new g(document).byIdDeep(e):new g(document).byId(e):new g(e)}static byTagName(e){return c(e)?new g(document).byTagName(e):new g(e)}static globalEval(e,t){return new g(document).globalEval(e,t)}static globalEvalSticky(e,t){return new g(document).globalEvalSticky(e,t)}static fromMarkup(e){const t=document.implementation.createHTMLDocument("");let r=(e=h(e)).toLowerCase();if(-1!=r.search(/\<\!doctype[^\w\-]+/gi)||-1!=r.search(/\<html[^\w\-]+/gi)||-1!=r.search(/\<head[^\w\-]+/gi)||-1!=r.search(/\<body[^\w\-]+/gi))return t.documentElement.innerHTML=e,new g(t.documentElement);{let t=function(e,t){let r=["<",t,">"].join(""),s=["<",t," "].join("");return 0==e.indexOf(r)||0==e.indexOf(s)},s=new g(document.createElement("div"));return t(r,"thead")||t(r,"tbody")?(s.html(`<table>${e}</table>`),s.querySelectorAll("table").get(0).childNodes.detach()):t(r,"tfoot")?(s.html(`<table><thead></thead><tbody><tbody${e}</table>`),s.querySelectorAll("table").get(2).childNodes.detach()):t(r,"tr")?(s.html(`<table><tbody>${e}</tbody></table>`),s.querySelectorAll("tbody").get(0).childNodes.detach()):t(r,"td")?(s.html(`<table><tbody><tr>${e}</tr></tbody></table>`),s.querySelectorAll("tr").get(0).childNodes.detach()):(s.html(e),s.childNodes.detach())}}get(e){return e<this.rootNode.length?new g(this.rootNode[e]):g.absent}getAsElem(e,t=n.Optional.absent){return e<this.rootNode.length?n.Optional.fromNullable(this.rootNode[e]):t}filesFromElem(e){var t;return e<this.rootNode.length&&(null===(t=this.rootNode[e])||void 0===t?void 0:t.files)?this.rootNode[e].files:[]}allElems(){return this.rootNode}isAbsent(){return 0==this.length}isPresent(e){let t=this.isAbsent();return!t&&e&&e.call(this,this),!t}ifPresentLazy(e=function(){}){return this.isPresent.call(this,e),this}delete(){this.eachElem((e=>{e.parentNode&&e.parentNode.removeChild(e)}))}querySelectorAll(e){return-1!=e.indexOf("/shadow/")?this._querySelectorAllDeep(e):this._querySelectorAll(e)}closest(e){return-1!=e.indexOf("/shadow/")?this._closestDeep(e):this._closest(e)}byId(e,t){let r=[];return t&&(r=r.concat(...new o.Es2019Array(...(null==this?void 0:this.rootNode)||[]).filter((t=>e==t.id)).map((e=>new g(e))))),r=r.concat(this.querySelectorAll(`[id="${e}"]`)),new g(...r)}byIdDeep(e,t){let r=[];t&&(r=r.concat(new o.Es2019Array(...(null==this?void 0:this.rootNode)||[]).filter((t=>e==t.id)).map((e=>new g(e)))));let s=this.querySelectorAllDeep(`[id="${e}"]`);return s.length&&r.push(s),new g(...r)}byTagName(e,t,r){var s;let n=[];return t&&(n=new o.Es2019Array(...null!==(s=null==this?void 0:this.rootNode)&&void 0!==s?s:[]).filter((t=>(null==t?void 0:t.tagName)==e)).reduce(((e,t)=>e.concat([t])),n)),r?n.push(this.querySelectorAllDeep(e)):n.push(this.querySelectorAll(e)),new g(...n)}attr(e,t=null){return new v(this,e,t)}style(e,t=null){return new p(this,e,t)}hasClass(e){let t=!1;return this.eachElem((r=>{if(t=r.classList.contains(e),t)return!1})),t}addClass(e){return this.eachElem((t=>t.classList.add(e))),this}removeClass(e){return this.eachElem((t=>t.classList.remove(e))),this}isMultipartCandidate(e=!1){const t="input[type='file']";return this.matchesSelector(t)||(e?this.querySelectorAllDeep(t):this.querySelectorAll(t)).first().isPresent()}html(e){return n.Optional.fromNullable(e).isAbsent()?this.isPresent()?n.Optional.fromNullable(this.innerHTML):n.Optional.absent:(this.innerHTML=e,this)}dispatchEvent(e){return this.eachElem((t=>t.dispatchEvent(e))),this}set innerHTML(e){this.eachElem((t=>t.innerHTML=e))}get innerHTML(){let e=[];return this.eachElem((t=>e.push(t.innerHTML))),e.join("")}set innerHtml(e){this.innerHTML=e}get innerHtml(){return this.innerHTML}filterSelector(e){let t=[];return this.eachElem((r=>{this._mozMatchesSelector(r,e)&&t.push(r)})),new g(...t)}matchesSelector(e){return this.asArray.some((t=>this._mozMatchesSelector(t.getAsElem(0).value,e)))}getIf(...e){let t=this.childNodes;for(let r=0;r<e.length;r++)if(t=t.filterSelector(e[r]),t.isAbsent())return t;return t}eachElem(e){for(let t=0,r=this.rootNode.length;t<r&&!1!==e(this.rootNode[t],t);t++);return this}firstElem(e=(e=>e)){return this.rootNode.length>1&&e(this.rootNode[0],0),this}lastElem(e=(e=>e)){return this.rootNode.length>1&&e(this.rootNode[this.rootNode.length-1],0),this}each(e){return new o.Es2019Array(...this.rootNode).forEach(((t,r)=>{if(null!=t)return e(g.byId(t),r)})),this}replace(e){return this.each((t=>{let r=t.getAsElem(0).value,s=r.parentElement,n=r.nextElementSibling,i=r.previousElementSibling;null!=n?new g(n).insertBefore(e):i?new g(i).insertAfter(e):new g(s).append(e),t.delete()})),e}first(e=(e=>e)){return this.rootNode.length>=1?(e(this.get(0),0),this.get(0)):this}last(e=(e=>e)){if(this.rootNode.length>=1){let t=this.get(this.rootNode.length-1);return e(t,0),t}return this}filter(e){let t=[];return this.each((r=>{e(r)&&t.push(r)})),new g(...t)}globalEval(e,t){var r,s,n;const i=null!==(s=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==s?s:null===(n=document.documentElement.getElementsByTagName("head"))||void 0===n?void 0:n[0],l=document.createElement("script");t&&(void 0!==(null==l?void 0:l.nonce)?l.nonce=t:l.setAttribute("nonce",t)),l.type="text/javascript",l.innerHTML=e;let a=i.appendChild(l);return i.removeChild(a),this}globalEvalSticky(e,t){let r=document.getElementsByTagName("head")[0]||document.documentElement,s=document.createElement("script");return this.applyNonce(t,s),s.type="text/javascript",s.innerHTML=e,r.appendChild(s),this}detach(){return this.eachElem((e=>{e.parentNode.removeChild(e)})),this}appendTo(e){return l.Lang.isString(e)?(this.appendTo(g.querySelectorAll(e)),this):(this.eachElem((t=>{e.getAsElem(0).orElseLazy((()=>({appendChild:()=>{}}))).value.appendChild(t)})),this)}loadScriptEval(e,t=0,r){return this._loadScriptEval(!1,e,t,r),this}loadScriptEvalSticky(e,t=0,r){return this._loadScriptEval(!0,e,t,r),this}insertAfter(...e){this.each((t=>{let r=t.getAsElem(0).value,s=r.parentNode;for(let t=0;t<e.length;t++){let n=r.nextSibling;e[t].eachElem((e=>{n?(s.insertBefore(e,n),r=n):s.appendChild(e)}))}}));let t=[];return t.push(this),t=t.concat(e),new g(...t)}insertBefore(...e){this.each((t=>{let r=t.getAsElem(0).value,s=r.parentNode;for(let t=0;t<e.length;t++)e[t].eachElem((e=>{s.insertBefore(e,r)}))}));let t=[];return t.push(this),t=t.concat(e),new g(...t)}orElse(...e){return this.isPresent()?this:new g(...e)}orElseLazy(e){return this.isPresent()?this:new g(e())}allParents(e){let t=this.parent(),r=[];for(;t.isPresent();)t.matchesSelector(e)&&r.push(t),t=t.parent();return new g(...r)}firstParent(e){let t=this.parent();for(;t.isPresent();){if(t.matchesSelector(e))return t;t=t.parent()}return g.absent}parentsWhileMatch(e){const t=[];let r=this.parent().filter((t=>t.matchesSelector(e)));for(;r.isPresent();)t.push(r),r=r.parent().filter((t=>t.matchesSelector(e)));return new g(...t)}parent(){let e=[];return this.eachElem((t=>{let r=t.parentNode||t.host||t.shadowRoot;r&&-1==e.indexOf(r)&&e.push(r)})),new g(...e)}copyAttrs(e){return e.eachElem((e=>{let t=f(e.attributes);for(let e of t){let t=e.value,r=e.name;switch(r){case"id":this.id.value=t;break;case"disabled":this.resolveAttributeHolder("disabled").disabled=t;break;case"checked":this.resolveAttributeHolder("checked").checked=t;break;default:this.attr(r).value=t}}})),this}outerHTML(e,t,r,s=!1){var n;if(this.isAbsent())return;let i=null===(n=null===document||void 0===document?void 0:document.activeElement)||void 0===n?void 0:n.id,l=i?g.getCaretPosition(document.activeElement):null,a=g.fromMarkup(e),o=[],u=this.getAsElem(0).value,h=a.get(0),c=u.parentNode,d=h.getAsElem(0).value;if(c.replaceChild(d,u),o.push(new g(d)),this.isAbsent())return this;let f=[];a.length>1&&(f=f.concat(...a.values.slice(1)),o.push(g.byId(d).insertAfter(new g(...f)))),t&&this.runScripts(),r&&this.runCss();let v=g.byId(i);return i&&v.isPresent()&&null!=l&&void 0!==l&&v.eachElem((e=>g.setCaretPosition(e,l))),a}runScripts(e=!1,t=m){const r=t=>{if(t.length){let r=[];new o.Es2019Array(...t).forEach((t=>{t.nonce?(r.length&&(this.globalEval(r.join("\n")),r.length=0),e?this.globalEvalSticky(t.evalText,t.nonce):this.globalEval(t.evalText,t.nonce)):r.push(t.evalText)})),r.length&&(e?this.globalEvalSticky(r.join("\n")):this.globalEval(r.join("\n")),r.length=0),t=[]}return t};let s=[],n=["","script","text/javascript","text/ecmascript","ecmascript"],i=i=>{var l,a,o,u;let c=i.tagName,f=(null!==(l=null==i?void 0:i.type)&&void 0!==l?l:"").toLowerCase();if(c&&d(c,"script")&&-1!=n.indexOf(f)){let n=i.getAttribute("src");if(void 0!==n&&null!=n&&n.length>0){let l=null!==(a=null==i?void 0:i.nonce)&&void 0!==a?a:i.getAttribute("nonce").value;t(n)&&(s=r(s),e?l?this.loadScriptEvalSticky(n,0,l):this.loadScriptEvalSticky(n,0):l?this.loadScriptEval(n,0,l):this.loadScriptEval(n,0))}else{let e=h(i.text||i.innerText||i.innerHTML),t=!0;for(;t;)t=!1,"\x3c!--"==e.substring(0,4)&&(e=e.substring(4),t=!0),"//\x3c!--"==e.substring(0,4)&&(e=e.substring(6),t=!0),"//<![CDATA["==e.substring(0,11)&&(e=e.substring(11),t=!0);let r=null!==(u=null!==(o=null==i?void 0:i.nonce)&&void 0!==o?o:i.getAttribute("nonce").value)&&void 0!==u?u:"";s.push({nonce:r,evalText:e})}}};try{new g(this.filterSelector("script"),this.querySelectorAll("script")).asArray.flatMap((e=>[...e.values])).sort(((e,t)=>e.compareDocumentPosition(t)-3)).forEach((e=>i(e))),r(s)}catch(e){console&&console.error&&console.error(e.message||e.description)}finally{i=null}return this}runCss(){return new g(this.filterSelector("link, style"),this.querySelectorAll("link, style")).asArray.flatMap((e=>[...e.values])).sort(((e,t)=>e.compareDocumentPosition(t)-3)).forEach((e=>(e=>{const t=g.byId(e),r=t.tagName.orElse("").value,s=g.byTagName("head");if(r&&d(r,"link")&&d(e.getAttribute("rel"),"stylesheet")){const r=e.getAttribute("rel"),n=s.querySelectorAll(`link[rel='stylesheet'][href='${r}']`);n.length?n.replace(t):s.append(t)}else if(r&&d(r,"style")){let e=t.innerHTML.replace(/\s+/gi,""),r=s.querySelectorAll("style"),n=r.asArray.filter((t=>t.innerHTML.replace(/\s+/gi,"")==e));r=new g(...n),r.length||s.append(t)}})(e))),this}click(){return this.fireEvent("click"),this}addEventListener(e,t,r){return this.eachElem((s=>s.addEventListener(e,t,r))),this}removeEventListener(e,t,r){return this.eachElem((s=>s.removeEventListener(e,t,r))),this}fireEvent(e,t={}){let r=new n.Config({bubbles:!0,cancelable:!0});r.shallowMerge(new n.Config(t)),r=JSON.parse(r.toJson()),this.eachElem((t=>{let s;if(t.ownerDocument)s=t.ownerDocument;else{if(9!=t.nodeType)throw new Error("Invalid node passed to fireEvent: "+t.id);s=t}if(t.dispatchEvent){let s=Event;switch(e){case"click":case"mousedown":case"mouseup":case"mousemove":s=this.global().MouseEvent;break;case"keyup":case"keydown":case"keypress":s=this.global().KeyboardEvent;break;case"focus":case"change":case"blur":case"select":break;default:throw"fireEvent: Couldn't find an event class for event '"+e+"'."}let n=new s(e,r);n.synthetic=!0,t.dispatchEvent(n)}else if(t.fireEvent){let n=s.createEventObject();n.synthetic=!0,Object.keys(r).forEach((e=>n[e]=r[e])),t.fireEvent("on"+e,n)}}))}textContent(e=""){return this.asArray.map((e=>e.getAsElem(0).orElseLazy((()=>({textContent:""}))).value.textContent||"")).reduce(((t,r)=>[t,e,r].join("")),"")}innerText(e=""){return this.asArray.map((e=>e.getAsElem(0).orElseLazy((()=>({innerText:""}))).value.innerText||"")).reduce(((t,r)=>[t,r].join(e)),"")}encodeFormElement(e=new n.Config({})){if(this.name.isAbsent())return;let t=e.shallowCopy;return this.each((e=>{var r,n;if(e.name.isAbsent())return;let i=e.name.value,l=e.tagName.orElse("__none__").value.toLowerCase(),a=e.type.orElse("__none__").value.toLowerCase();if(a=a.toLowerCase(),("input"==l||"textarea"==l||"select"==l)&&null!=i&&""!=i&&!e.disabled){if("select"==l){let r=e.getAsElem(0).value;if(r.selectedIndex>=0){let e=r.options.length;for(let s=0;s<e;s++)if(r.options[s].selected){let e=r.options[s];t.append(i).value=null!=e.getAttribute("value")?e.value:e.text}}}if(l!=s.SELECT&&a!=s.BUTTON&&a!=s.RESET&&a!=s.SUBMIT&&a!=s.IMAGE&&(a!=s.CHECKBOX&&a!=s.RADIO||e.checked)){let s=null===(n=null===(r=e.value)||void 0===r?void 0:r.value)||void 0===n?void 0:n.files,l=null!=s?s:[];if(null==l?void 0:l.length)t.assign(i).value=Array.from(l);else{if(s)return;t.append(i).value=e.inputValue.value}}}})),t}get cDATAAsString(){return this.asArray.flatMap((e=>e.childNodes.asArray)).filter((e=>{var t,r;return 4==(null===(r=null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.value)||void 0===r?void 0:r.nodeType)})).reduce(((e,t)=>{var r,s,n;return e.push(null!==(n=null===(s=null===(r=null==t?void 0:t.value)||void 0===r?void 0:r.value)||void 0===s?void 0:s.data)&&void 0!==n?n:""),e}),[]).join("")}subNodes(e,t){return n.Optional.fromNullable(t).isAbsent()&&(t=this.length),new g(...this.rootNode.slice(e,Math.min(t,this.length)))}limits(e){return this._limits=e,this}hasNext(){let e=-1!=this._limits&&this.pos>=this._limits-1,t=this.pos>=this.values.length-1;return!(e||t)}next(){return this.hasNext()?(this.pos++,new g(this.values[this.pos])):null}lookAhead(e=1){return this.values.length-1<this.pos+e?i.dD.EO_STRM:new g(this.values[this.pos+e])}current(){return-1==this.pos?i.dD.BEF_STRM:new g(this.values[this.pos])}reset(){this.pos=-1}attachShadow(e={mode:"open"}){let t=[];return this.eachElem((r=>{let s;if(!(null==r?void 0:r.attachShadow))throw new Error("Shadow dom creation not supported by the browser, please use a shim, to gain this functionality");s=g.byId(r.attachShadow(e)),t.push(s)})),new g(...t)}waitUntilDom(e,t={attributes:!0,childList:!0,subtree:!0,timeout:500,interval:100}){return u(this,void 0,void 0,(function*(){return function(e,t,r={attributes:!0,childList:!0,subtree:!0,timeout:500,interval:100}){return new Promise(((s,n)=>{let i=null;const l=new Error("Mutation observer timeout");function a(e,t){let s=null;return t(e)?e:(s=r.childList?t(e)?e:e.childNodes.filter((e=>t(e))).first().value.value:r.subtree?t(e)?e:e.querySelectorAll(" * ").filter((e=>t(e))).first().value.value:t(e)?e:null,s)}let o=e;if(o=a(o,t))s(new g(o));else if("undefined"!=typeof MutationObserver){const a=setTimeout((()=>(i.disconnect(),n(l))),r.timeout),o=r=>{const n=new g(r.map((e=>e.target))).filter((e=>t(e))).first();n.isPresent()&&(clearTimeout(a),i.disconnect(),s(new g(n||e)))};i=new MutationObserver(o);let u=Object.assign({},r);delete u.timeout,e.eachElem((e=>{i.observe(e,u)}))}else{let i=setInterval((()=>{let r=a(e,t);r&&(o&&(clearTimeout(o),clearInterval(i),i=null),s(new g(r||e)))}),r.interval),o=setTimeout((()=>{i&&(clearInterval(i),n(l))}),r.timeout)}}))}(this,e,t)}))}get shadowElements(){let e=(this.querySelectorAll("*").filter((e=>e.hasShadow)).allElems()||[]).map((e=>e.shadowRoot));return new g(...e)}get shadowRoot(){let e=[];for(let t=0;t<this.rootNode.length;t++)this.rootNode[t].shadowRoot&&e.push(this.rootNode[t].shadowRoot);return new g(...e)}get hasShadow(){for(let e=0;e<this.rootNode.length;e++)if(this.rootNode[e].shadowRoot)return!0;return!1}static getCaretPosition(e){let t=0;try{if(null===document||void 0===document?void 0:document.selection){e.focus();let r=document.selection.createRange();r.moveStart("character",-e.value.length),t=r.text.length}}catch(e){}return t}static setCaretPosition(e,t){(null==e?void 0:e.focus)&&(null==e||e.focus()),(null==e?void 0:e.setSelectiongRange)&&(null==e||e.setSelectiongRange(t,t))}[Symbol.iterator](){return{next:()=>({done:!this.hasNext(),value:this.next()})}}concat(e,t=!0){const r=new g(...this.asArray.concat(e.asArray));if(!t)return r;let s={};return new g(...r.asArray.filter((e=>{const t=!(null==s?void 0:s[e.value.value.outerHTML]);return s[e.value.value.outerHTML]=!0,t})))}append(e){return this.each((t=>e.appendTo(t))),this}prependTo(e){return e.eachElem((e=>{e.prepend(...this.allElems())})),this}prepend(e){return this.eachElem((t=>{t.prepend(...e.allElems())})),this}_querySelectorAll(e){var t,r;if(!(null===(t=null==this?void 0:this.rootNode)||void 0===t?void 0:t.length))return this;let s=[];for(let t=0;t<this.rootNode.length;t++){if(!(null===(r=this.rootNode[t])||void 0===r?void 0:r.querySelectorAll))continue;let n=this.rootNode[t].querySelectorAll(e);s=s.concat(f(n))}return new g(...s)}_querySelectorAllDeep(e){var t;if(!(null===(t=null==this?void 0:this.rootNode)||void 0===t?void 0:t.length))return this;let r=new g(...this.rootNode),s=e.split(/\/shadow\//);for(let e=0;e<s.length;e++){if(""==s[e])continue;let t=s[e];r=r.querySelectorAll(t),e<s.length-1&&(r=r.shadowRoot)}return r}_closest(e){var t,r;if(!(null===(t=null==this?void 0:this.rootNode)||void 0===t?void 0:t.length))return this;let s=[];for(let t=0;t<this.rootNode.length;t++){if(!(null===(r=this.rootNode[t])||void 0===r?void 0:r.closest))continue;let n=[this.rootNode[t].closest(e)];s=s.concat(...n)}return new g(...s)}_closestDeep(e){var t;if(!(null===(t=null==this?void 0:this.rootNode)||void 0===t?void 0:t.length))return this;let r=new g(...this.rootNode),s=e.split(/\/shadow\//);for(let e=0;e<s.length;e++){if(""==s[e])continue;let t=s[e];r=r.closest(t),e<s.length-1&&(r=r.shadowRoot)}return r}_mozMatchesSelector(e,t){let r=e;return(r.matches||r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector||function(t){let r=(document||ownerDocument).querySelectorAll(t),s=r.length;for(;--s>=0&&r.item(s)!==e;);return s>-1}).call(e,t)}_loadScriptEval(e,t,r=0,s){let n=this.createSourceNode(t,s),i=this.createSourceNode(null,s),l=`nonce_${Date.now()}_${Math.random()}`;i.innerHTML=`document.head["${l}"] = true`;let a=document.head;if(a.appendChild(i),a.removeChild(i),a[l]){try{r?setTimeout((()=>{a.appendChild(n),e||a.removeChild(n)}),r):(a.appendChild(n),e||a.removeChild(n))}finally{delete a[l]}return this}}resolveAttributeHolder(e="value"){let t=[];return t[e]=null,e in this.getAsElem(0).value?this.getAsElem(0).value:t}createSourceNode(e,t){let r=document.createElement("script");return r.type="text/javascript",t&&(void 0!==(null==r?void 0:r.nonce)?r.nonce=t:r.setAttribute("nonce",t)),e&&(r.src=e),r}applyNonce(e,t){e&&(void 0!==(null==t?void 0:t.nonce)?t.nonce=e:t.setAttribute("nonce",e))}}g.absent=new g,g.global=a.R;class y{constructor(){this.data=[]}collect(e){this.data.push(e)}get finalValue(){return new g(...this.data)}}const b=g,E=g.querySelectorAll},484:function(e,t,r){r.d(t,{Es2019Array:function(){return s}});class s extends Array{constructor(...e){super(...e),Array.prototype.flatMap||(this.flatMap=e=>this._flatMap(e)),Array.prototype.flat||(this.flat=(e=1)=>this._flat(e))}concat(...e){return new s(...super.concat(...e))}reverse(){return new s(...super.reverse())}slice(e,t){return new s(...super.slice(e,t))}splice(e,t){return new s(...super.splice(e,t))}filter(e,t){return new s(...super.filter(e,t))}_flat(e=1){return this._flatResolve(this,e)}_flatResolve(e,t=1){if(0==t)return e;let r=[];return e.forEach((e=>{e=Array.isArray(e)?e:[e];let s=this._flatResolve(e,t-1);r=r.concat(s)})),new s(...r)}_flatMap(e,t=!1){let r=this.map((t=>e(t)));return this._flatResolve(r)}}},456:function(e,t,r){function s(){var e;let t="undefined"!=typeof globalThis&&globalThis.window?globalThis.window:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:void 0!==r.g&&(null===r.g||void 0===r.g?void 0:r.g.window)?r.g.window:void 0!==r.g?r.g:null;return null!==(e=null==t?void 0:t.window)&&void 0!==e?e:t}r.d(t,{R:function(){return s}})},805:function(e,t,r){r.d(t,{Lang:function(){return s}});var s,n=r(152);!function(e){function t(e){let t=/\s/,r=(e=e.replace(/^\s\s*/,"")).length;for(;t.test(e.charAt(--r)););return e.slice(0,r+1)}function r(e){return!!arguments.length&&null!=e&&("string"==typeof e||e instanceof String)}e.saveResolve=function(e,t=null){try{let r=e();return n.Optional.fromNullable(null!=r?r:t)}catch(e){return n.Optional.absent}},e.saveResolveLazy=function(e,t=null){try{let r=e();return n.Optional.fromNullable(null!=r?r:t())}catch(e){return n.Optional.absent}},e.strToArray=function(e,r=/\./gi){let s=[];return e.split(r).forEach((e=>{s.push(t(e))})),s},e.trim=t,e.objToArray=function(e,t=0,r=[]){return"__undefined__"==(null!=e?e:"__undefined__")?null!=r?r:null:e instanceof Array&&!t&&!r?e:r.concat(Array.prototype.slice.call(e,t))},e.equalsIgnoreCase=function(e,t){let r=null!=t?t:"___no_value__";return(null!=e?e:"___no_value__").toLowerCase()===r.toLowerCase()},e.assertType=function(e,t){return r(t)?typeof e==t:e instanceof t},e.isString=r,e.isFunc=function(e){return e instanceof Function||"function"==typeof e},e.objAssign=function(e,...t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");let r=Object(e);return Object.assign?(t.forEach((e=>Object.assign(r,e))),r):(t.filter((e=>null!=e)).forEach((e=>{let t=e;Object.keys(t).filter((e=>Object.prototype.hasOwnProperty.call(t,e))).forEach((e=>r[e]=t[e]))})),r)}}(s||(s={}))},493:function(e,t,r){r.d(t,{BroadcastChannelBroker:function(){return c},Broker:function(){return d},Message:function(){return a},NoCrypto:function(){return i}});var s=r(382),n=(r(551),r(456));class i{decode(e){return e}encode(e){return e}}let l=new i;class a{constructor(e={},t="*"){this.message=e,this.encoded=!1,this.targetOrigin=t,this.creationDate=(new Date).getMilliseconds(),this.identifier=(new Date).getMilliseconds()+"_"+Math.random()+"_"+Math.random()}}class o{constructor(e,t){this.detail=t,this.bubbles=!0,this.cancelable=!0,this.composed=!0,this.channel=e}}class u{constructor(){this.messageListeners={},this.subjects={},this.processedMessages={},this.cleanupCnt=0,this.TIMEOUT_IN_MS=1e3,this.MSG_EVENT="message",this.crypto=l}registerListener(e,t){return this.reserveListenerNS(e),this.messageListeners[e].push((e=>{var r;e.identifier in this.processedMessages||(((null==e?void 0:e.encoded)||(null===(r=null==e?void 0:e.detail)||void 0===r?void 0:r.encoded))&&((null==e?void 0:e.detail)?(e.detail.message=this.crypto.decode(e.detail.message),e.detail.encoded=!1):(e.message=this.crypto.decode(e.message),e.encoded=!1)),t(e))})),this}asSubject(e){this.reserveSubjectNS(e);let t=this.subjects[e],r=t.next;return t.next=s=>{(null==s?void 0:s.detail)?r.call(t,null==s?void 0:s.detail):this.broadcast(e,s)},t}asObservable(e){return this.asSubject(e).asObservable()}reserveListenerNS(e){this.messageListeners[e]||(this.messageListeners[e]=[]),this.messageListeners["*"]||(this.messageListeners["*"]=[])}reserveSubjectNS(e){this.subjects[e]||(this.subjects[e]=new s.Subject),this.subjects["*"]||(this.subjects["*"]=new s.Subject)}unregisterListener(e,t){return this.messageListeners[e]=(this.messageListeners[e]||[]).filter((e=>e!==t)),this}answer(e,t,r){if("string"==typeof t&&(t=new a(t)),!u.isAnswer(t))return r.identifier=u.getAnswerId(t),this.broadcast(e,r),this}static getAnswerId(e){return"_r_"+e.identifier}static isAnswer(e){return 0==e.identifier.indexOf("_r_")}request(e,t){"string"==typeof t&&(t=new a(t));let r=t.identifier,s=new Promise(((t,s)=>{let n=null,i=s=>{s.identifier!=r&&s.identifier=="_r_"+r&&(clearTimeout(n),this.unregisterListener(e,i),t(s))};n=setTimeout((()=>{this.unregisterListener(e,i),s("request message performed, timeout, no return value")}),3e3),this.registerListener(e,i)}));return this.broadcast(e,t),s}gcProcessedMessages(){if(++this.cleanupCnt%10!=0)return;let e={};Object.keys(this.processedMessages).forEach((t=>{this.messageStillActive(t)||(e[t]=this.processedMessages[t])})),this.processedMessages=e}messageStillActive(e){return this.processedMessages[e]>(new Date).getMilliseconds()-this.TIMEOUT_IN_MS}markMessageAsProcessed(e){this.processedMessages[e.identifier]=e.creationDate}}u.EVENT_TYPE="brokerEvent";let h=e=>{var t;if(null===(t=(0,n.R)())||void 0===t?void 0:t.BroadcastChannel)return new((0,n.R)().BroadcastChannel)(e);throw Error("No Broadcast channel in the system, use a shim or provide a factory functionin the constructor")};class c extends u{constructor(e=h,t="brokr",r=l){super(),this.brokerFactory=e,this.channelGroup=t,this.crypto=r,this.openChannels={},this.msgListener=e=>{var t,r;e.detail.encoded&&(e.detail.message=this.crypto.decode(e.detail.message),e.detail.encoded=!1);let s=e.detail,n=e.channel;return(null===(t=this.messageListeners)||void 0===t?void 0:t[n])&&(null===(r=this.messageListeners)||void 0===r||r[n].forEach((e=>{e(s)}))),this.markMessageAsProcessed(s),!0},this.crypto=r,this.register()}broadcast(e,t,r=!0){try{"string"==typeof t&&(t=new a(t));let s=JSON.stringify(t);t=JSON.parse(s);let n=new o(e,t);n.detail.message=this.crypto.encode(n.detail.message),n.detail.encoded=!0,(null==this?void 0:this.subjects[e])&&this.subjects[e].next(n),this.openChannels[this.channelGroup].postMessage(n),r&&this.msgListener(n)}finally{this.gcProcessedMessages()}return this}registerListener(e,t){return super.registerListener(e,t),this}register(){return this.openChannels[this.channelGroup]||(this.openChannels[this.channelGroup]=this.brokerFactory(this.channelGroup)),this.openChannels[this.channelGroup].addEventListener("message",this.msgListener),this}unregister(){return this.openChannels[this.channelGroup].close(),this}}class d extends u{constructor(e=window,t="brokr",r=l){super(),this.brokerGroup=t;let s=e=>{var t,r,s,n;let i=null!==(t=null==e?void 0:e.detail)&&void 0!==t?t:null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.detail,l=null!==(n=null===(s=null==e?void 0:e.data)||void 0===s?void 0:s.channel)&&void 0!==n?n:null==e?void 0:e.channel;if((null==i?void 0:i.identifier)&&(null==i?void 0:i.message)){let t=i;if(t.identifier in this.processedMessages)return;null==e||e.detail,this.broadcast(l,t)}};this.msgHandler=e=>s(e),this.crypto=r,this.register(e)}register(e){if(this.rootElem=e.host?e.host:e,e.host){e.host.setAttribute("data-broker","1")}else(null==e?void 0:e.setAttribute)&&e.setAttribute("data-broker","1");return this.rootElem.addEventListener(this.brokerGroup+"__||__"+d.EVENT_TYPE,this.msgHandler,{capture:!0}),this.rootElem.addEventListener(this.brokerGroup+"__||__"+d.EVENT_TYPE+this.MSG_EVENT,this.msgHandler,{capture:!0}),this}unregister(){return this.rootElem.removeEventListener(this.brokerGroup+"__||__"+d.EVENT_TYPE,this.msgHandler),this.rootElem.removeEventListener(this.brokerGroup+"__||__"+this.MSG_EVENT,this.msgHandler),this}broadcast(e,t){if("string"==typeof t&&(t=new a(t)),null==this?void 0:this.subjects[e]){let r=new o(e,t);r.detail.encoded||(r.detail.message=this.crypto.encode(r.detail.message),r.detail.encoded=!0),this.subjects[e].next(r)}try{this.dispatchUp(e,t,!1,!0),this.dispatchDown(e,t,!0,!1)}finally{this.gcProcessedMessages()}return this}dispatchUp(e,t,r=!0,s=!0){if(r||this.msgCallListeners(e,t),this.markMessageAsProcessed(t),null!=(0,n.R)().parent){let r=new o(e,t);(0,n.R)().parent.postMessage(JSON.parse(JSON.stringify(r)),t.targetOrigin)}s&&this.dispatchSameLevel(e,t)}dispatchSameLevel(e,t){let r=this.transformToEvent(e,t,!0);(0,n.R)().dispatchEvent(r)}dispatchDown(e,t,r=!0,s=!0){r||this.msgCallListeners(e,t),this.processedMessages[t.identifier]=t.creationDate;let n=this.transformToEvent(e,t);Array.prototype.slice.call(document.querySelectorAll("iframe")).forEach((r=>{let s=new o(e,t);r.contentWindow.postMessage(JSON.parse(JSON.stringify(s)),t.targetOrigin)})),Array.prototype.slice.call(document.querySelectorAll("[data-broker='1']")).forEach((e=>e.dispatchEvent(n))),s&&this.dispatchSameLevel(e,t)}msgCallListeners(e,t){let r=this.messageListeners[e];if(null==r?void 0:r.length){let e=e=>{e(t)};r.forEach(e)}}transformToEvent(e,t,r=!1){let s=new o(e,t);return s.bubbles=r,d.createCustomEvent(this.brokerGroup+"__||__"+d.EVENT_TYPE,s)}static createCustomEvent(e,t){if("function"!=typeof(0,n.R)().CustomEvent){let r=document.createEvent("HTMLEvents");return r.detail=t.detail,r.channel=t.channel,r.initEvent(e,t.bubbles,t.cancelable),r}{let r=new((0,n.R)().CustomEvent)(e,t);return r.channel=t.channel,r}}}},152:function(e,t,r){r.d(t,{CONFIG_ANY:function(){return c},CONFIG_VALUE:function(){return h},Config:function(){return d},Monad:function(){return l},Optional:function(){return a},ValueEmbedder:function(){return o}});var s=r(805),n=r(484),i=s.Lang.objAssign;class l{constructor(e){this._value=e}get value(){return this._value}map(e){e||(e=e=>e);let t=e(this.value);return new l(t)}flatMap(e){let t=this.map(e);for(;(null==t?void 0:t.value)instanceof l;)t=t.value;return t}}class a extends l{constructor(e){super(e)}get value(){return this._value instanceof l?this._value.flatMap().value:this._value}static fromNullable(e){return new a(e)}isAbsent(){return void 0===this.value||null==this.value}isPresent(e){let t=this.isAbsent();return!t&&e&&e.call(this,this),!t}ifPresentLazy(e=(()=>{})){return this.isPresent.call(this,e),this}orElse(e){return this.isPresent()?this:null==e?a.absent:this.flatMap((()=>e))}orElseLazy(e){return this.isPresent()?this:this.flatMap(e)}flatMap(e){let t=super.flatMap(e);return t instanceof a?t.flatMap():a.fromNullable(t.value)}getIf(...e){e=this.preprocessKeys(...e);let t=this;for(let r=0;r<e.length;r++){let s=this.keyVal(e[r]),n=this.arrayIndex(e[r]);if(""===s&&n>=0){if(t=this.getClass().fromNullable(t.value instanceof Array?t.value.length<n?null:t.value[n]:null),t.isAbsent())return t}else if(s&&n>=0){if(t.getIfPresent(s).isAbsent())return t;if(t=t.getIfPresent(s).value instanceof Array?this.getClass().fromNullable(t.getIfPresent(s).value[n]):this.getClass().absent,t.isAbsent())return t}else{if(t=t.getIfPresent(s),t.isAbsent())return t;n>-1&&(t=this.getClass().fromNullable(t.value[n]))}}return t}match(e){return!this.isAbsent()&&e(this.value)}get(e=a.absent){return this.isAbsent()?this.getClass().fromNullable(e).flatMap():this.getClass().fromNullable(this.value).flatMap()}toJson(){return JSON.stringify(this.value)}getClass(){return a}arrayIndex(e){let t=e.indexOf("["),r=e.indexOf("]");return t>=0&&r>0&&t<r?parseInt(e.substring(t+1,r)):-1}keyVal(e){let t=e.indexOf("[");return t>=0?e.substring(0,t):e}getIfPresent(e){return this.isAbsent()?this.getClass().absent:this.getClass().fromNullable(this.value[e]).flatMap()}resolve(e){if(this.isAbsent())return a.absent;try{return a.fromNullable(e(this.value))}catch(e){return a.absent}}preprocessKeys(...e){return new n.Es2019Array(...e).flatMap((e=>new n.Es2019Array(...e.split(/]\s*\[/gi)).map((e=>(-1==(e=e.replace(/^\s+|\s+$/g,"")).indexOf("[")&&-1!=e.indexOf("]")&&(e="["+e),-1==e.indexOf("]")&&-1!=e.indexOf("[")&&(e+="]"),e)))))}}a.absent=a.fromNullable(null);class o extends a{constructor(e,t="value"){super(e),this.key=t}get value(){return this._value?this._value[this.key]:null}set value(e){this._value&&(this._value[this.key]=e)}orElse(e){let t={};return t[this.key]=e,this.isPresent()?this:new o(t,this.key)}orElseLazy(e){if(this.isPresent())return this;{let t={};return t[this.key]=e(),new o(t,this.key)}}getClass(){return o}static fromNullable(e,t="value"){return new o(e,t)}}o.absent=o.fromNullable(null);class u extends o{constructor(e,t,r){super(e,t),this.arrPos=null!=r?r:-1}get value(){return""==this.key&&this.arrPos>=0?this._value[this.arrPos]:this.key&&this.arrPos>=0?this._value[this.key][this.arrPos]:this._value[this.key]}set value(e){""==this.key&&this.arrPos>=0?this._value[this.arrPos]=e:this.key&&this.arrPos>=0?this._value[this.key][this.arrPos]=e:this._value[this.key]=e}}u.absent=u.fromNullable(null);const h="__END_POINT__",c="__ANY_POINT__";class d extends a{constructor(e,t){super(e),this.configDef=t}get shallowCopy(){return this.shallowCopy$()}shallowCopy$(){let e=new d({});return e.shallowMerge(this.value),e}get deepCopy(){return this.deepCopy$()}deepCopy$(){return new d(i({},this.value))}static fromNullable(e){return new d(e)}shallowMerge(e,t=!0,r=!1){for(let s in e.value)void 0!==s&&null!=s&&(!t&&s in this.value||(r?Array.isArray(e.getIf(s).value)?new n.Es2019Array(...e.getIf(s).value).forEach((e=>this.append(s).value=e)):this.append(s).value=e.getIf(s).value:this.assign(s).value=e.getIf(s).value))}append(...e){if(e.length<1)return;this.assertAccessPath(...e);let t=e[e.length-1],r=this.getIf(...e).isPresent();this.buildPath(...e);let s=this.arrayIndex(t);if(s>-1)throw Error("Append only possible on non array properties, use assign on indexed data");let n=this.getIf(...e).value;return Array.isArray(n)||(n=this.assign(...e).value=[n]),r&&n.push({}),s=n.length-1,new u(1==e.length?this.value:this.getIf.apply(this,e.slice(0,e.length-1)).value,t,s)}appendIf(e,...t){return e?this.append(...t):{value:null}}assign(...e){if(e.length<1)return;this.assertAccessPath(...e),this.buildPath(...e);let t=this.keyVal(e[e.length-1]),r=this.arrayIndex(e[e.length-1]);return new u(1==e.length?this.value:this.getIf.apply(this,e.slice(0,e.length-1)).value,t,r)}assignIf(e,...t){return e?this.assign(...t):{value:null}}getIf(...e){return this.assertAccessPath(...e),this.getClass().fromNullable(super.getIf.apply(this,e).value)}get(e){return this.getClass().fromNullable(super.get(e).value)}delete(e){return e in this.value&&delete this.value[e],this}toJson(){return JSON.stringify(this.value)}getClass(){return d}setVal(e){this._value=e}assertAccessPath(...e){var t,r,s,i,l,o,u,h,d;if(e=this.preprocessKeys(...e),!this.configDef)return;let f=a.fromNullable(Object.keys(this.configDef).map((e=>{let t={};return t[e]=this.configDef[e],t})));for(let v=0;v<e.length;v++){let p=this.keyVal(e[v]),m=this.arrayIndex(e[v]);if(f=this.isArray(m)?""!=p?Array.isArray(f.value)?a.fromNullable(null===(r=null===(t=new n.Es2019Array(...f.value).find((e=>{var t;return!(null===(t=null==e?void 0:e[p])||void 0===t||!t)})))||void 0===t?void 0:t[p])||void 0===r?void 0:r[m]):a.fromNullable(null!==(l=null===(i=null===(s=f.value)||void 0===s?void 0:s[p])||void 0===i?void 0:i[m])&&void 0!==l?l:null):Array.isArray(f.value)?a.fromNullable(null===(o=f.value)||void 0===o?void 0:o[m]):a.absent:Array.isArray(f.value)?a.fromNullable(null===(u=new n.Es2019Array(...f.value).find((e=>{var t;return!(null===(t=null==e?void 0:e[p])||void 0===t||!t)})))||void 0===u?void 0:u[p]):a.fromNullable(null!==(d=null===(h=f.value)||void 0===h?void 0:h[p])&&void 0!==d?d:null),!f.isPresent())throw Error("Access Path to config invalid");if(f.value==c)return}}buildPath(...e){e=this.preprocessKeys(...e);let t=this,r=this.getClass().fromNullable(null),s=-1,n=function(e,t){let r=e.length,s=r+t;for(let t=r;t<s;t++)e.push({})};for(let i=0;i<e.length;i++){let l=this.keyVal(e[i]),a=this.arrayIndex(e[i]);if(this.isArrayPos(l,a)){t.setVal(t.value instanceof Array?t.value:[]),n(t.value,a+1),s>=0&&(r.value[s]=t.value),r=t,s=a,t=this.getClass().fromNullable(t.value[a]);continue}let o=t.getIf(l);if(this.isNoArray(a))o.isAbsent()?o=this.getClass().fromNullable(t.value[l]={}):t=o;else{let e=o.value instanceof Array?o.value:[];n(e,a+1),t.value[l]=e,o=this.getClass().fromNullable(e[a])}r=t,s=a,t=o}return this}isNoArray(e){return-1==e}isArray(e){return!this.isNoArray(e)}isArrayPos(e,t){return""===e&&t>=0}}},376:function(e,t,r){r.d(t,{CancellablePromise:function(){return l},PromiseStatus:function(){return s}});var s,n=r(152);!function(e){e[e.PENDING=0]="PENDING",e[e.FULLFILLED=1]="FULLFILLED",e[e.REJECTED=2]="REJECTED"}(s||(s={}));class i{constructor(e){this.status=s.PENDING,this.allFuncs=[],this.value=e,this.value((e=>this.resolve(e)),(e=>this.reject(e)))}static all(...e){let t,r=0,s=new i(((e,r)=>{t=e})),n=()=>{r++,e.length==r&&t()};n.__last__=!0;for(let t=0;t<e.length;t++)e[t].finally(n);return s}static race(...e){let t,r,s=new i(((e,s)=>{t=e,r=s})),n=()=>(t&&t(),t=null,r=null,null);n.__last__=!0;let l=()=>(r&&r(),r=null,t=null,null);l.__last__=!0;for(let t=0;t<e.length;t++)e[t].then(n),e[t].catch(l);return s}static reject(e){return new i(((t,r)=>{e instanceof i?e.then((e=>{r(e)})):setTimeout((()=>{r(e)}),1)}))}static resolve(e){return new i(((t,r)=>{e instanceof i?e.then((e=>t(e))):setTimeout((()=>{t(e)}),1)}))}then(e,t){return this.allFuncs.push({then:e}),t&&this.allFuncs.push({catch:t}),this.spliceLastFuncs(),this}catch(e){return this.allFuncs.push({catch:e}),this.spliceLastFuncs(),this}finally(e){if(!this.__reason__)return this.allFuncs.push({finally:e}),this.spliceLastFuncs(),this;this.__reason__.finally(e)}resolve(e){for(;this.allFuncs.length&&this.allFuncs[0].then;){let t=this.allFuncs.shift(),r=n.Optional.fromNullable(t.then(e));if(!r.isPresent())break;if(r=r.flatMap(),(e=r.value)instanceof i)return void this.transferIntoNewPromise(e)}this.appyFinally(),this.status=s.FULLFILLED}reject(e){for(;this.allFuncs.length&&!this.allFuncs[0].finally;){let t=this.allFuncs.shift();if(t.catch){let r=n.Optional.fromNullable(t.catch(e));if(r.isPresent()){if(r=r.flatMap(),(e=r.value)instanceof i)return void this.transferIntoNewPromise(e);this.status=s.REJECTED;break}break}}this.status=s.REJECTED,this.appyFinally()}appyFinally(){for(;this.allFuncs.length;){let e=this.allFuncs.shift();e.finally&&e.finally()}}spliceLastFuncs(){let e=[],t=[];for(let r=0;r<this.allFuncs.length;r++)for(let s in this.allFuncs[r])this.allFuncs[r][s].__last__?e.push(this.allFuncs[r]):t.push(this.allFuncs[r]);this.allFuncs=t.concat(e)}transferIntoNewPromise(e){for(let t=0;t<this.allFuncs.length;t++)for(let r in this.allFuncs[t])e[r](this.allFuncs[t][r])}}class l extends i{constructor(e,t){super(e),this.cancellator=()=>{},this.cancellator=t}cancel(){this.status=s.REJECTED,this.appyFinally(),this.allFuncs=[]}then(e,t){return super.then(e,t)}catch(e){return super.catch(e)}finally(e){return super.finally(e)}}},255:function(e,t,r){r.d(t,{Hh:function(){return d},NU:function(){return h},Oj:function(){return a},W2:function(){return f},WO:function(){return g},XM:function(){return v},dC:function(){return u},dD:function(){return s},fQ:function(){return l},jO:function(){return p},jg:function(){return m},nD:function(){return o},zl:function(){return c}});var s,n=r(152),i=r(484);function l(e){let t=1;for(;e.lookAhead(t)!=s.EO_STRM;)t++;return--t}!function(e){e.EO_STRM="__EO_STRM__",e.BEF_STRM="___BEF_STRM__"}(s||(s={}));class a{constructor(e,...t){this.first=e,this.selectedPos=0,this.strms=[e].concat(...t),this.activeStrm=this.strms[this.selectedPos]}current(){return this.activeStrm.current()}hasNext(){return!!this.activeStrm.hasNext()||!(this.selectedPos>=this.strms.length)&&-1!=this.findNextStrm()}findNextStrm(){let e=!1,t=this.selectedPos;for(;!e&&t<this.strms.length;)e=this.strms[t].hasNext(),e||t++;return e?t:-1}lookAhead(e=1){const t=this.strms.slice(this.selectedPos);if(!t.length)return s.EO_STRM;const r=[...t];for(;r.length;){let t=r.shift(),n=t.lookAhead(e);if(n!=s.EO_STRM)return n;e-=l(t)}return s.EO_STRM}next(){return this.activeStrm.hasNext()?this.activeStrm.next():(this.selectedPos=this.findNextStrm(),-1==this.selectedPos?s.EO_STRM:(this.activeStrm=this.strms[this.selectedPos],this.activeStrm.next()))}reset(){this.activeStrm=this.strms[0],this.selectedPos=0;for(let e=0;e<this.strms.length;e++)this.strms[e].reset()}}class o{constructor(e,t){this.total=t,this.start=e,this.value=e-1}hasNext(){return this.value<this.total-1}next(){return this.value++,this.value<=this.total-1?this.value:s.EO_STRM}lookAhead(e=1){return this.value+e>this.total-1?s.EO_STRM:this.value+e}reset(){this.value=this.start-1}current(){return this.start-1?s.BEF_STRM:this.value}}class u{constructor(...e){this.dataPos=-1,this.value=e}lookAhead(e=1){return this.dataPos+e>this.value.length-1?s.EO_STRM:this.value[this.dataPos+e]}hasNext(){return this.value.length-1>this.dataPos}next(){var e;return this.dataPos++,null!==(e=null==this?void 0:this.value[this.dataPos])&&void 0!==e?e:s.EO_STRM}reset(){this.dataPos=-1}current(){return this.value[Math.max(0,this.dataPos)]}}class h{constructor(e,t){this._current=s.BEF_STRM,this._filterIdx={},this._unfilteredPos=0,this.filterFunc=e,this.inputDataSource=t}hasNext(){let e,t=1,r=!1;for(;!r&&(e=this.inputDataSource.lookAhead(t))!=s.EO_STRM;)this.filterFunc(e)?(this._filterIdx[this._unfilteredPos+t]=!0,r=!0):t++;return r}next(){var e,t;let r=s.EO_STRM;for(;this.inputDataSource.hasNext();){this._unfilteredPos++;let n=this.inputDataSource.next();if(n!=s.EO_STRM&&(null!==(t=null===(e=this._filterIdx)||void 0===e?void 0:e[this._unfilteredPos])&&void 0!==t&&t||this.filterFunc(n))){this._filterIdx[this._unfilteredPos]=!0,r=n;break}}return this._current=r,r}lookAhead(e=1){var t;let r;for(let n=1;e>0&&(r=this.inputDataSource.lookAhead(n))!=s.EO_STRM;n++){((null===(t=this._filterIdx)||void 0===t?void 0:t[this._unfilteredPos+n])||this.filterFunc(r))&&(e--,this._filterIdx[this._unfilteredPos+n]=!0)}return r}current(){return this._current}reset(){this._current=s.BEF_STRM,this._filterIdx={},this._unfilteredPos=0,this.inputDataSource.reset()}}class c{constructor(e,t){this.mapFunc=e,this.inputDataSource=t}hasNext(){return this.inputDataSource.hasNext()}next(){return this.mapFunc(this.inputDataSource.next())}reset(){this.inputDataSource.reset()}current(){return this.mapFunc(this.inputDataSource.current())}lookAhead(e=1){const t=this.inputDataSource.lookAhead(e);return t==s.EO_STRM?t:this.mapFunc(t)}}class d{constructor(){this.finalValue={}}collect(e){var t,r;this.finalValue[null!==(t=e[0])&&void 0!==t?t:e]=null===(r=e[1])||void 0===r||r}}class f{constructor(){this.finalValue=new n.Config({})}collect(e){this.finalValue.append(e.key).value=e.value}}class v{constructor(){this.finalValue=new FormData}collect(e){this.finalValue.append(e.key,e.value)}}class p{constructor(){this.finalValue=new FormData}collect(e){let t=e.encodeFormElement();t.isPresent()&&this.finalValue.append(e.name.value,t.get(e.name).value)}}class m{constructor(){this.formData=[]}collect(e){let t=e.encodeFormElement();t.isPresent()&&this.formData.push([e.name.value,t.get(e.name).value])}get finalValue(){return new i.Es2019Array(...this.formData).map((e=>e.join("="))).reduce(((e,t)=>[e,t].join("&")))}}class g{constructor(){this.data=[]}collect(e){this.data.push(e)}get finalValue(){return this.data}}},551:function(e,t,r){r.d(t,{FlatMapStreamDataSource:function(){return l},LazyStream:function(){return o},Stream:function(){return a}});var s=r(152),n=r(255),i=r(585);class l{constructor(e,t){this.walkedDataSources=[],this._currPos=0,this.mapFunc=e,this.inputDataSource=t}hasNext(){return this.resolveActiveHasNext()||this.resolveNextHasNext()}resolveActiveHasNext(){let e=!1;return this.activeDataSource&&(e=this.activeDataSource.hasNext()),e}lookAhead(e=1){var t;let r=null===(t=null==this?void 0:this.activeDataSource)||void 0===t?void 0:t.lookAhead(e);if((null==this?void 0:this.activeDataSource)&&r!=n.dD.EO_STRM)return r;this.activeDataSource&&(e-=(0,n.fQ)(this.activeDataSource));for(let t=1;;t++){let r=this.inputDataSource.lookAhead(t);if(r===n.dD.EO_STRM)return n.dD.EO_STRM;let s=this.mapFunc(r),i=this.toDatasource(s),l=i.lookAhead(e);if(l!=n.dD.EO_STRM)return l;e-=(0,n.fQ)(i)}}toDatasource(e){let t=Array.isArray(e)?new n.dC(...e):e;return this.walkedDataSources.push(t),t}resolveNextHasNext(){let e=!1;for(;!e&&this.inputDataSource.hasNext();){let t=this.mapFunc(this.inputDataSource.next());this.activeDataSource=this.toDatasource(t),e=this.activeDataSource.hasNext()}return e}next(){if(this.hasNext())return this._currPos++,this.activeDataSource.next()}reset(){this.inputDataSource.reset(),this.walkedDataSources.forEach((e=>e.reset())),this.walkedDataSources=[],this._currPos=0,this.activeDataSource=null}current(){return this.activeDataSource||this.hasNext(),this.activeDataSource.current()}}class a{constructor(...e){this._limits=-1,this.pos=-1,this.value=e}static of(...e){return new a(...e)}static ofAssoc(e){return this.of(...Object.keys(e)).map((t=>[t,e[t]]))}static ofDataSource(e){let t=[];for(;e.hasNext();)t.push(e.next());return new a(...t)}static ofDomQuery(e){return a.of(...e.asArray)}static ofConfig(e){return a.of(...Object.keys(e.value)).map((t=>[t,e.value[t]]))}current(){return-1==this.pos?n.dD.BEF_STRM:this.pos>=this.value.length?n.dD.EO_STRM:this.value[this.pos]}limits(e){return this._limits=e,this}concat(...e){let t=[this].concat(e);return a.of(...t).flatMap((e=>e))}onElem(e){for(let t=0;t<this.value.length&&(-1==this._limits||t<this._limits)&&!1!==e(this.value[t],t);t++);return this}each(e){this.onElem(e),this.reset()}map(e){e||(e=e=>e);let t=[];return this.each((r=>{t.push(e(r))})),new a(...t)}flatMap(e){let t=[];return this.each((r=>{let s=e(r);t=Array.isArray(s)?t.concat(s):t.concat(s.value)})),a.of(...t)}filter(e){let t=[];return this.each((r=>{e(r)&&t.push(r)})),new a(...t)}reduce(e,t=null){let r=null!=t?0:1,n=null!=t?t:this.value.length?this.value[0]:null;for(let t=r;t<this.value.length&&(-1==this._limits||t<this._limits);t++)n=e(n,this.value[t]);return this.reset(),s.Optional.fromNullable(n)}first(){return this.reset(),this.value&&this.value.length?s.Optional.fromNullable(this.value[0]):s.Optional.absent}last(){let e=this._limits>0?Math.min(this._limits,this.value.length):this.value.length;return this.reset(),s.Optional.fromNullable(e?this.value[e-1]:null)}anyMatch(e){for(let t=0;t<this.value.length&&(-1==this._limits||t<this._limits);t++)if(e(this.value[t]))return!0;return this.reset(),!1}allMatch(e){if(!this.value.length)return!1;let t=0;for(let r=0;r<this.value.length;r++)e(this.value[r])&&t++;return this.reset(),t==this.value.length}noneMatch(e){let t=0;for(let r=0;r<this.value.length;r++)e(this.value[r])||t++;return this.reset(),t==this.value.length}sort(e){let t=this.value.slice().sort(e);return a.of(...t)}collect(e){return this.each((t=>e.collect(t))),this.reset(),e.finalValue}hasNext(){let e=-1!=this._limits&&this.pos>=this._limits-1,t=this.pos>=this.value.length-1;return!(e||t)}next(){return this.hasNext()?(this.pos++,this.value[this.pos]):null}lookAhead(e=1){return this.pos+e>=this.value.length?n.dD.EO_STRM:this.value[this.pos+e]}[Symbol.iterator](){return{next:()=>({done:!this.hasNext(),value:this.next()})}}reset(){this.pos=-1}}class o{constructor(e){this._limits=-1,this.pos=-1,this.dataSource=e}static of(...e){return new o(new n.dC(...e))}static ofAssoc(e){return this.of(...Object.keys(e)).map((t=>[t,e[t]]))}static ofStreamDataSource(e){return new o(e)}static ofDomQuery(e){return o.of(...e.asArray)}static ofConfig(e){return o.of(...Object.keys(e.value)).map((t=>[t,e.value[t]]))}hasNext(){return!this.isOverLimits()&&this.dataSource.hasNext()}next(){let e=this.dataSource.next();return this.pos++,e}lookAhead(e=1){return this.dataSource.lookAhead(e)}current(){return this.dataSource.current()}reset(){this.dataSource.reset(),this.pos=-1,this._limits=-1}concat(...e){return o.ofStreamDataSource(new n.Oj(this,e))}nextFilter(e){if(this.hasNext()){let t=this.next();return e(t)?t:this.nextFilter(e)}return null}limits(e){return this._limits=e,this}collect(e){for(;this.hasNext();){let t=this.next();e.collect(t)}return this.reset(),e.finalValue}onElem(e){return new o(new n.zl((t=>(!1===e(t,this.pos)&&this.stop(),t)),this))}filter(e){return new o(new n.NU(e,this))}map(e){return new o(new n.zl(e,this))}flatMap(e){return new o(new l(e,this))}each(e){for(;this.hasNext();)!1===e(this.next())&&this.stop();this.reset()}reduce(e,t=null){if(!this.hasNext())return s.Optional.absent;let r,n=null;if(null!=t)r=t,n=this.next();else{if(r=this.next(),!this.hasNext())return s.Optional.fromNullable(r);n=this.next()}for(r=e(r,n);this.hasNext();)n=this.next(),r=e(r,n);return this.reset(),s.Optional.fromNullable(r)}last(){return this.hasNext()?this.reduce(((e,t)=>t)):s.Optional.absent}first(){return this.reset(),this.hasNext()?s.Optional.fromNullable(this.next()):s.Optional.absent}anyMatch(e){for(;this.hasNext();)if(e(this.next()))return!0;return!1}allMatch(e){for(;this.hasNext();)if(!e(this.next()))return!1;return!0}noneMatch(e){for(;this.hasNext();)if(e(this.next()))return!1;return!0}sort(e){let t=this.collect(new n.WO);return t=t.sort(e),o.of(...t)}get value(){return this.collect(new n.WO)}[Symbol.iterator](){return{next:()=>({done:!this.hasNext(),value:this.next()})}}stop(){this.pos=this._limits+1e9,this._limits=0}isOverLimits(){return-1!=this._limits&&this.pos>=this._limits-1}}Object.defineProperty(i.DomQuery.prototype,"stream",{get:function(){return a.ofDomQuery(this)}}),Object.defineProperty(i.DomQuery.prototype,"lazyStream",{get:function(){return o.ofDomQuery(this)}})},356:function(e,t,r){r.d(t,{TagBuilder:function(){return i}});var s=r(585),n=r(456);void 0!==n.R&&function(){if(void 0===(0,n.R)().Reflect||void 0===(0,n.R)().customElements||(0,n.R)().customElements.polyfillWrapFlushCallback)return;const e=HTMLElement;(0,n.R)().HTMLElement={HTMLElement:function(){return Reflect.construct(e,[],this.constructor)}}.HTMLElement,HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}();class i{constructor(e){this.extendsType=HTMLElement,this.observedAttrs=[],this.tagName=e}static withTagName(e){return new i(e)}withObservedAttributes(...e){this.observedAttrs=e}withConnectedCallback(e){return this.connectedCallback=e,this}withDisconnectedCallback(e){return this.disconnectedCallback=e,this}withAdoptedCallback(e){return this.adoptedCallback=e,this}withAttributeChangedCallback(e){return this.attributeChangedCallback=e,this}withExtendsType(e){return this.extendsType=e,this}withOptions(e){return this.theOptions=e,this}withClass(e){if(this.markup)throw Error("Markup already defined, markup must be set in the class");return this.clazz=e,this}withMarkup(e){if(this.clazz)throw Error("Class already defined, markup must be set in the class");return this.markup=e,this}register(){if(!this.clazz&&!this.markup)throw Error("Class or markup must be defined");if(this.clazz){let e=e=>{let t=this[e],r=this.clazz.prototype[e],n=t||r;n&&(this.clazz.prototype[e]=function(){t?n.apply(s.DomQuery.byId(this)):r.apply(this)})};e("connectedCallback"),e("disconnectedCallback"),e("adoptedCallback"),e("attributeChangedCallback"),this.observedAttrs.length&&Object.defineProperty(this.clazz.prototype,"observedAttributes",{get(){return this.observedAttrs}}),(0,n.R)().customElements.define(this.tagName,this.clazz,this.theOptions||null)}else{let e=this,t=(t,r)=>{e[t]&&e[t].apply(s.DomQuery.byId(r))};(0,n.R)().customElements.define(this.tagName,class extends this.extendsType{constructor(){super(),this.innerHTML=e.markup}static get observedAttributes(){return e.observedAttrs}connectedCallback(){t("connectedCallback",this)}disconnectedCallback(){t("disconnectedCallback",this)}adoptedCallback(){t("adoptedCallback",this)}attributeChangedCallback(){t("attributeChangedCallback",this)}},this.theOptions||null)}}}},121:function(e,t,r){r.d(t,{XMLQuery:function(){return a},XQ:function(){return o}});var s=r(805),n=r(585),i=r(456),l=s.Lang.isString;class a extends n.DomQuery{constructor(e,t="text/xml"){let r=e=>{if(null==e)return null;return s.Lang.saveResolveLazy((()=>new((0,i.R)().DOMParser)),(()=>(()=>{let e=new ActiveXObject("Microsoft.XMLDOM");return e.async=!1,{parseFromString:(t,r)=>e.loadXML(t)}})())).value.parseFromString(e,t)};l(e)?super(r(e)):super(e)}isXMLParserError(){return this.querySelectorAll("parsererror").isPresent()}toString(){let e=[];return this.eachElem((t=>{var r,s,n,l;let a=null!==(l=null===(n=null===(s=null===(r=(0,i.R)())||void 0===r?void 0:r.XMLSerializer)||void 0===s?void 0:s.constructor())||void 0===n?void 0:n.serializeToString(t))&&void 0!==l?l:null==t?void 0:t.xml;a&&e.push(a)})),e.join("")}parserErrorText(e){return this.querySelectorAll("parsererror").textContent(e)}static parseXML(e){return new a(e)}static parseHTML(e){return new a(e,"text/html")}static fromString(e,t="text/xml"){return new a(e,t)}}const o=a},382:function(t){t.exports=e}},r={};function s(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,s),i.exports}s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return function(){s.r(n),s.d(n,{ArrayCollector:function(){return o.WO},ArrayStreamDataSource:function(){return o.dC},AssocArrayCollector:function(){return o.Hh},BroadcastChannelBroker:function(){return h.BroadcastChannelBroker},Broker:function(){return h.Broker},CONFIG_ANY:function(){return r.CONFIG_ANY},CONFIG_VALUE:function(){return r.CONFIG_VALUE},CancellablePromise:function(){return i.CancellablePromise},Config:function(){return r.Config},ConfigCollector:function(){return o.W2},DQ:function(){return e.DQ},DQ$:function(){return e.DQ$},DomQuery:function(){return e.DomQuery},DomQueryCollector:function(){return e.DomQueryCollector},ElementAttribute:function(){return e.ElementAttribute},ExpiringCrypto:function(){return d},FilteredStreamDatasource:function(){return o.NU},FlatMapStreamDataSource:function(){return a.FlatMapStreamDataSource},FormDataCollector:function(){return o.XM},JSONCrypto:function(){return c},Lang:function(){return t.Lang},LazyStream:function(){return a.LazyStream},MappedStreamDataSource:function(){return o.zl},Message:function(){return h.Message},Monad:function(){return r.Monad},MultiStreamDatasource:function(){return o.Oj},NoCrypto:function(){return h.NoCrypto},Optional:function(){return r.Optional},PromiseStatus:function(){return i.PromiseStatus},QueryFormDataCollector:function(){return o.jO},QueryFormStringCollector:function(){return o.jg},SequenceDataSource:function(){return o.nD},Stream:function(){return a.Stream},TagBuilder:function(){return u.TagBuilder},ValueEmbedder:function(){return r.ValueEmbedder},XMLQuery:function(){return l.XMLQuery},XQ:function(){return l.XQ}});var e=s(585),t=s(805),r=s(152),i=s(376),l=s(121),a=s(551),o=s(255),u=s(356),h=s(493);class c{decode(e){return(null==e?void 0:e.encryptedData)?JSON.parse(e.encryptedData):e}encode(e){return{encryptedData:JSON.stringify(e)}}}class d{constructor(e,t,r){this.timeout=e,this.parentCrypto=t,this.hashSum=r,this.gcCycleCnt=0,this.storedMessages={},this.lastCall=0}decode(e){var t;const r=(new Date).getTime();this.gcLimitReached(r)&&(this.storedMessages=a.LazyStream.ofAssoc(this.storedMessages).filter((e=>e[1]>=r)).collect(new o.Hh)),this.lastCall=r;let s=this.hashSum.encode(e);if(!(null===(t=this.storedMessages)||void 0===t?void 0:t[s.toString()]))throw Error("An item was tried to be decryted which either was expired or invalid");return this.parentCrypto.decode(e)}gcLimitReached(e){return this.lastCall+this.timeout<e||++this.gcCycleCnt%d.MAX_GC_CYCLES==0}encode(e){let t=this.parentCrypto.encode(e),r=this.hashSum.encode(t);return this.storedMessages[r.toString()]=(new Date).getTime()+this.timeout,t}}d.MAX_GC_CYCLES=10}(),n}()}));
//# sourceMappingURL=index.js.map