!function(){"use strict";var t={484:function(t,e,r){r.d(e,{Es2019Array:function(){return l}});class s extends Array{constructor(...t){super(...t),t._another?this._another=t._another:this._another=t,this.flatMap=t=>this._flatMap(t),this.flat=(t=1)=>this._flat(t)}map(t,e){return new n(...Array.prototype.map.call(this._another,t,e))}concat(...t){return new n(...Array.prototype.concat.call(this._another,...t))}reverse(){return new n(...Array.prototype.reverse.call(this._another))}slice(t,e){return new n(...Array.prototype.slice.call(this._another,t,e))}splice(t,e){return new n(...Array.prototype.splice.call(this._another,t,e))}filter(t,e){return new n(...Array.prototype.filter.call(this._another,t,e))}reduce(t,e){return Array.prototype.reduce.call(this._another,t,e)}_flat(t=1){return this._flatResolve(this._another,t)}_flatResolve(t,e=1){if(0==e)return t;let r=[];return t.forEach((t=>{t=Array.isArray(t)?t:[t];let s=this._flatResolve(t,e-1);r=r.concat(s)})),new l(...r)}_flatMap(t){let e=this.map((e=>t(e)));return this._flatResolve(e)}}function n(...t){let e=new s(...t);return new Proxy(e,{get(t,e,r){return"symbol"==typeof e?t._another[e]:isNaN(parseInt(e))?t[e]:t._another[e]},set(t,e,r){return t[e]=r,t._another[e]=r,!0}})}var l=Array.prototype.flatMap?function(...t){return t}:n},805:function(t,e,r){r.d(e,{Lang:function(){return s}});var s,n=r(152),l=r(484);!function(t){function e(t){let e=/\s/,r=(t=t.replace(/^\s\s*/,"")).length;for(;e.test(t.charAt(--r)););return t.slice(0,r+1)}function r(t){return!!arguments.length&&null!=t&&("string"==typeof t||t instanceof String)}t.saveResolve=function(t,e=null){try{let r=t();return n.Optional.fromNullable(null!=r?r:e)}catch(t){return n.Optional.absent}},t.saveResolveLazy=function(t,e=null){try{let r=t();return n.Optional.fromNullable(null!=r?r:e())}catch(t){return n.Optional.absent}},t.strToArray=function(t,r=/\./gi){let s=[];return t.split(r).forEach((t=>{s.push(e(t))})),s},t.trim=e,t.objToArray=function(t,e=0,r=[]){return"__undefined__"==(null!=t?t:"__undefined__")?null!=r?r:null:t instanceof Array&&!e&&!r?t:new l.Es2019Array(...r.concat(Array.prototype.slice.call(t,e)))},t.equalsIgnoreCase=function(t,e){let r=null!=e?e:"___no_value__";return(null!=t?t:"___no_value__").toLowerCase()===r.toLowerCase()},t.assertType=function(t,e){return r(e)?typeof t==e:t instanceof e},t.isString=r,t.isFunc=function(t){return t instanceof Function||"function"==typeof t},t.objAssign=function(t,...e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");let r=Object(t);return Object.assign?(e.forEach((t=>Object.assign(r,t))),r):(e.filter((t=>null!=t)).forEach((t=>{let e=t;Object.keys(e).filter((t=>Object.prototype.hasOwnProperty.call(e,t))).forEach((t=>r[t]=e[t]))})),r)}}(s||(s={}))},152:function(t,e,r){r.d(e,{Optional:function(){return a}});var s=r(805),n=r(484);s.Lang.objAssign;class l{constructor(t){this._value=t}get value(){return this._value}map(t){t||(t=t=>t);let e=t(this.value);return new l(e)}flatMap(t){let e=this.map(t);for(;(null==e?void 0:e.value)instanceof l;)e=e.value;return e}}class a extends l{constructor(t){super(t)}get value(){return this._value instanceof l?this._value.flatMap().value:this._value}static fromNullable(t){return new a(t)}isAbsent(){return void 0===this.value||null==this.value}isPresent(t){let e=this.isAbsent();return!e&&t&&t.call(this,this),!e}ifPresentLazy(t=(()=>{})){return this.isPresent.call(this,t),this}orElse(t){return this.isPresent()?this:null==t?a.absent:this.flatMap((()=>t))}orElseLazy(t){return this.isPresent()?this:this.flatMap(t)}flatMap(t){let e=super.flatMap(t);return e instanceof a?e.flatMap():a.fromNullable(e.value)}getIf(...t){t=this.preprocessKeys(...t);let e=this;for(let r=0;r<t.length;r++){let s=this.keyVal(t[r]),n=this.arrayIndex(t[r]);if(""===s&&n>=0){if(e=this.getClass().fromNullable(e.value instanceof Array?e.value.length<n?null:e.value[n]:null),e.isAbsent())return e}else if(s&&n>=0){if(e.getIfPresent(s).isAbsent())return e;if(e=e.getIfPresent(s).value instanceof Array?this.getClass().fromNullable(e.getIfPresent(s).value[n]):this.getClass().absent,e.isAbsent())return e}else{if(e=e.getIfPresent(s),e.isAbsent())return e;n>-1&&(e=this.getClass().fromNullable(e.value[n]))}}return e}match(t){return!this.isAbsent()&&t(this.value)}get(t=a.absent){return this.isAbsent()?this.getClass().fromNullable(t).flatMap():this.getClass().fromNullable(this.value).flatMap()}toJson(){return JSON.stringify(this.value)}getClass(){return a}arrayIndex(t){let e=t.indexOf("["),r=t.indexOf("]");return e>=0&&r>0&&e<r?parseInt(t.substring(e+1,r)):-1}keyVal(t){let e=t.indexOf("[");return e>=0?t.substring(0,e):t}getIfPresent(t){return this.isAbsent()?this.getClass().absent:this.getClass().fromNullable(this.value[t]).flatMap()}resolve(t){if(this.isAbsent())return a.absent;try{return a.fromNullable(t(this.value))}catch(t){return a.absent}}preprocessKeys(...t){return new n.Es2019Array(...t).flatMap((t=>new n.Es2019Array(...t.split(/]\s*\[/gi)).map((t=>(-1==(t=t.replace(/^\s+|\s+$/g,"")).indexOf("[")&&-1!=t.indexOf("]")&&(t="["+t),-1==t.indexOf("]")&&-1!=t.indexOf("[")&&(t+="]"),t)))))}}a.absent=a.fromNullable(null);class i extends a{constructor(t,e="value"){super(t),this.key=e}get value(){return this._value?this._value[this.key]:null}set value(t){this._value&&(this._value[this.key]=t)}orElse(t){let e={};return e[this.key]=t,this.isPresent()?this:new i(e,this.key)}orElseLazy(t){if(this.isPresent())return this;{let e={};return e[this.key]=t(),new i(e,this.key)}}getClass(){return i}static fromNullable(t,e="value"){return new i(t,e)}}i.absent=i.fromNullable(null);class u extends i{constructor(t,e,r){super(t,e),this.arrPos=null!=r?r:-1}get value(){return""==this.key&&this.arrPos>=0?this._value[this.arrPos]:this.key&&this.arrPos>=0?this._value[this.key][this.arrPos]:this._value[this.key]}set value(t){""==this.key&&this.arrPos>=0?this._value[this.arrPos]=t:this.key&&this.arrPos>=0?this._value[this.key][this.arrPos]=t:this._value[this.key]=t}}u.absent=u.fromNullable(null)}},e={};function r(s){var n=e[s];if(void 0!==n)return n.exports;var l=e[s]={exports:{}};return t[s](l,l.exports,r),l.exports}r.d=function(t,e){for(var s in e)r.o(e,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};!function(){r.r(s),r.d(s,{CancellablePromise:function(){return i},Promise:function(){return a},PromiseStatus:function(){return t},interval:function(){return l},timeout:function(){return n}});var t,e=r(152);function n(t){let e=null;return new i(((r,s)=>{e=setTimeout((()=>r()),t)}),(()=>{e&&(clearTimeout(e),e=null)}))}function l(t){let e=null;return new i(((r,s)=>{e=setInterval((()=>{r()}),t)}),(()=>{e&&(clearInterval(e),e=null)}))}!function(t){t[t.PENDING=0]="PENDING",t[t.FULLFILLED=1]="FULLFILLED",t[t.REJECTED=2]="REJECTED"}(t||(t={}));class a{constructor(e){this.status=t.PENDING,this.allFuncs=[],this.value=e,this.value((t=>this.resolve(t)),(t=>this.reject(t)))}static all(...t){let e,r=0,s=new a(((t,r)=>{e=t})),n=()=>{r++,t.length==r&&e()};n.__last__=!0;for(let e=0;e<t.length;e++)t[e].finally(n);return s}static race(...t){let e,r,s=new a(((t,s)=>{e=t,r=s})),n=()=>(e&&e(),e=null,r=null,null);n.__last__=!0;let l=()=>(r&&r(),r=null,e=null,null);l.__last__=!0;for(let e=0;e<t.length;e++)t[e].then(n),t[e].catch(l);return s}static reject(t){return new a(((e,r)=>{t instanceof a?t.then((t=>{r(t)})):setTimeout((()=>{r(t)}),1)}))}static resolve(t){return new a(((e,r)=>{t instanceof a?t.then((t=>e(t))):setTimeout((()=>{e(t)}),1)}))}then(t,e){return this.allFuncs.push({then:t}),e&&this.allFuncs.push({catch:e}),this.spliceLastFuncs(),this}catch(t){return this.allFuncs.push({catch:t}),this.spliceLastFuncs(),this}finally(t){if(!this.__reason__)return this.allFuncs.push({finally:t}),this.spliceLastFuncs(),this;this.__reason__.finally(t)}resolve(r){for(;this.allFuncs.length&&this.allFuncs[0].then;){let t=this.allFuncs.shift(),s=e.Optional.fromNullable(t.then(r));if(!s.isPresent())break;if(s=s.flatMap(),(r=s.value)instanceof a)return void this.transferIntoNewPromise(r)}this.appyFinally(),this.status=t.FULLFILLED}reject(r){for(;this.allFuncs.length&&!this.allFuncs[0].finally;){let s=this.allFuncs.shift();if(s.catch){let n=e.Optional.fromNullable(s.catch(r));if(n.isPresent()){if(n=n.flatMap(),(r=n.value)instanceof a)return void this.transferIntoNewPromise(r);this.status=t.REJECTED;break}break}}this.status=t.REJECTED,this.appyFinally()}appyFinally(){for(;this.allFuncs.length;){let t=this.allFuncs.shift();t.finally&&t.finally()}}spliceLastFuncs(){let t=[],e=[];for(let r=0;r<this.allFuncs.length;r++)for(let s in this.allFuncs[r])this.allFuncs[r][s].__last__?t.push(this.allFuncs[r]):e.push(this.allFuncs[r]);this.allFuncs=e.concat(t)}transferIntoNewPromise(t){for(let e=0;e<this.allFuncs.length;e++)for(let r in this.allFuncs[e])t[r](this.allFuncs[e][r])}}class i extends a{constructor(t,e){super(t),this.cancellator=()=>{},this.cancellator=e}cancel(){this.status=t.REJECTED,this.appyFinally(),this.allFuncs=[]}then(t,e){return super.then(t,e)}catch(t){return super.catch(t)}finally(t){return super.finally(t)}}}();var n=exports;for(var l in s)n[l]=s[l];s.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})}();
//# sourceMappingURL=Promise.js.map